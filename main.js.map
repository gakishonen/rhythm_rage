{"version":3,"sources":["oldtimer.js","keycodes.js","utilities.js","strings.js","input.js","tts.js","soundObject.js","scrollingText.js","soundSource.js","soundHandler.js","classes.js","player.js","menuItem.js","menu.js","readlines.js","main.js"],"names":["OldTimer","constructor","elapsed","paused","lastTime","pauseWhen","started","isActive","performance","now","pause","reset","restart","resume","KeyEvent","DOM_VK_CANCEL","DOM_VK_HELP","DOM_VK_BACK_SPACE","DOM_VK_TAB","DOM_VK_CLEAR","DOM_VK_RETURN","DOM_VK_ENTER","DOM_VK_SHIFT","DOM_VK_CONTROL","DOM_VK_ALT","DOM_VK_PAUSE","DOM_VK_CAPS_LOCK","DOM_VK_ESCAPE","DOM_VK_SPACE","DOM_VK_PAGE_UP","DOM_VK_PAGE_DOWN","DOM_VK_END","DOM_VK_HOME","DOM_VK_LEFT","DOM_VK_UP","DOM_VK_RIGHT","DOM_VK_DOWN","DOM_VK_PRINTSCREEN","DOM_VK_INSERT","DOM_VK_DELETE","DOM_VK_0","DOM_VK_1","DOM_VK_2","DOM_VK_3","DOM_VK_4","DOM_VK_5","DOM_VK_6","DOM_VK_7","DOM_VK_8","DOM_VK_9","DOM_VK_SEMICOLON","DOM_VK_EQUALS","DOM_VK_A","DOM_VK_B","DOM_VK_C","DOM_VK_D","DOM_VK_E","DOM_VK_F","DOM_VK_G","DOM_VK_H","DOM_VK_I","DOM_VK_J","DOM_VK_K","DOM_VK_L","DOM_VK_M","DOM_VK_N","DOM_VK_O","DOM_VK_P","DOM_VK_Q","DOM_VK_R","DOM_VK_S","DOM_VK_T","DOM_VK_U","DOM_VK_V","DOM_VK_W","DOM_VK_X","DOM_VK_Y","DOM_VK_Z","DOM_VK_CONTEXT_MENU","DOM_VK_NUMPAD0","DOM_VK_NUMPAD1","DOM_VK_NUMPAD2","DOM_VK_NUMPAD3","DOM_VK_NUMPAD4","DOM_VK_NUMPAD5","DOM_VK_NUMPAD6","DOM_VK_NUMPAD7","DOM_VK_NUMPAD8","DOM_VK_NUMPAD9","DOM_VK_MULTIPLY","DOM_VK_ADD","DOM_VK_SEPARATOR","DOM_VK_SUBTRACT","DOM_VK_DECIMAL","DOM_VK_DIVIDE","DOM_VK_F1","DOM_VK_F2","DOM_VK_F3","DOM_VK_F4","DOM_VK_F5","DOM_VK_F6","DOM_VK_F7","DOM_VK_F8","DOM_VK_F9","DOM_VK_F10","DOM_VK_F11","DOM_VK_F12","DOM_VK_F13","DOM_VK_F14","DOM_VK_F15","DOM_VK_F16","DOM_VK_F17","DOM_VK_F18","DOM_VK_F19","DOM_VK_F20","DOM_VK_F21","DOM_VK_F22","DOM_VK_F23","DOM_VK_F24","DOM_VK_NUM_LOCK","DOM_VK_SCROLL_LOCK","DOM_VK_COMMA","DOM_VK_PERIOD","DOM_VK_SLASH","DOM_VK_BACK_QUOTE","DOM_VK_OPEN_BRACKET","DOM_VK_BACK_SLASH","DOM_VK_CLOSE_BRACKET","DOM_VK_QUOTE","DOM_VK_META","walk","require","GameUtils","calculateDelta","lx","sx","sr","delta","progressPan","current","max","progressPitch","min","minPitch","maxPitch","progressVolume","minVolume","maxVolume","getProportion","distance3D","x1","y1","z1","x2","y2","z2","Math","sqrt","distance","jx","jy","kx","ky","calculateAngle","angle","atan2","PI","isCollide3D","a","b","x","width","y","height","z","depth","randomInt","floor","random","getRandomArbitrary","sleep","ms","Promise","resolve","setTimeout","percent","int1","int2","percentOf","percentage","percented","value","average","arr","startIndex","len","length","val","i","averageInt","neg","num","numericSort","shuffle","j","objSize","obj","size","key","hasOwnProperty","copyObject","Object","assign","create","getPrototypeOf","arraysEqual","arr1","arr2","pauseTimeout","timerId","Date","clearTimeout","resumeTimeout","window","remaining","start","callback","randomProperty","keys","findFiles","path","ext","list","fileExt","filesSync","pb","pf","stat","next","push","substr","findFolders","dirsSync","utils","Strings","strings","lang","mainMenu","deleteAchievements","achievements","changeRate","downloadPacks","changePack","levelSelect","fileNotFound","packError","get","what","rep","str","forEach","v","i1","Number","replace","speak","check","lng","ScrollingText","EventEmitter","KeyboardInput","keyDown","justPressed","chars","justReleased","justPressedEventCallback","charEventCallback","init","that","document","addEventListener","event","handleKeyDown","handleKeyUp","handleChar","isPaused","which","emit","char","String","fromCharCode","destroy","isDown","isJustPressed","isJustReleased","keysDown","kd","getChars","keysPressed","splice","releaseAllKeys","keysReleased","app","remote","useWebTTS","TTS","webTTS","voices","speechController","ducking","synth","Speech","rate","interrupt","VK_CONTROL","splitSentences","then","data","catch","e","setLanguage","err","setRate","r","newRate","text","queue","accessibilitySupportEnabled","listeners","onstart","duck","onend","unduck","onerror","getElementById","innerHTML","para","createElement","appendChild","createTextNode","setWebTTS","tts","stop","cancel","speech","inp","changeVoice","name","voiceArray","k","includes","setVoice","cb","silent","wl","split","input","selection","ducker","playOnceTimer","panner","defaults","panningModel","maxDistance","sono","playInBackground","SoundObjectItem","file","tag","stream","duckingFirstTime","fileName","sound","src","onComplete","doneLoading","timeout","checkProgress","loaded","Audio","playbackRate","pitch","loop","progress","replay","play","unload","time","oldVolume","volume","fade","pos","forcePlay","playSync","die","evt","once","removeAllListeners","active","playing","pan","currentPan","effects","add","set","seek","currentTime","duration","position","SoundObject","sounds","Array","loadingQueue","queueCallback","loadedSounds","loadingSounds","loadedCallback","queueLength","statusCallback","directory","extension","oneShots","debug","oneShotSound","setStatusCallback","findSound","findSoundIndex","resetQueuedInstance","found","returnObject","loadQueueSync","so","setQueueCallback","loadQueue","createSync","snd","enqueue","handleQueue","resetQueue","setCallback","isLoading","playOnce","on","noMore","filename","kill","destroyAll","sos","old","sop","undefined","runningText","delimiter","splitText","currentLine","sndOpen","sndContinue","sndClose","prom","res","handleKeys","readCurrentLine","copyCurrentLine","advance","handleTap","action","trim","removeEventListener","SoundSource","son","speed","minRate","maxRate","toDestroy","rateShiftSpeed","currentPosition","setPosition","update","SoundHandler","directional","staticSounds","dynamicSounds","currentDynamicSound","maxDynamicSounds","currentStaticSound","maxStaticSounds","reuseSounds","playStatic","slot","findFreeStaticSlot","SoundItem","findFreeDynamicSlot","findDynamicSound","reuse","threeD","main","lsd","lad","preload_add","console","log","preload","existsSync","reject","Snd","n","p","t","achi","ach","alias","bgtVolume","aliasa","aliases","failreq","files","suc","pool","debugmode","Action","f","l","bks","ty","eti","ends","efa","kp","played","released","held","killperfect","apool","bk","failsound","earlysound","latesound","efailsound","type","end","endsound","cooldown","cooler","get_ach","release","early","perfect","badkey","late","fail","efail","Intersound","Player","beatcoins","pack","allowSave","save","actionKeys","unlocks","default","level","fails","win","MenuTypes","NORMAL","SELECTOR","SLIDER","EDIT","AUDIO","MenuItem","id","shortcut","select","AudioItem","SelectorItem","options","defaultOption","selectCallback","currentOption","increase","decrease","SliderItem","from","to","currentValue","increaseBy","minValue","maxValue","EditItem","defaultText","addChar","removeChar","substring","Menu","menuData","music","handleInput","fadeTime","audio","isAudio","prependAudio","first","cursor","dir","sndKeyChar","sndKeyDelete","sndSliderLeft","sndSliderRight","sndBoundary","sndChoose","sndMove","sndSelector","sndWrap","hammer","Hammer","nextItem","sndName","previousItem","moveCallback","insertCharacter","toLowerCase","removeCharacter","destroySounds","runSync","run","s","selected","handleSwipe","items","addItem","toReturn","musicDuration","debugl","os","fs","first_iter","tut_count","tut_beep","tut_ap","tut_early","tut_late","tut_great","enhancing","tut_mus","gotoline","report","fetch","encodeURIComponent","message","stack","reportString","musiconly","timewindow","okval","last","totalactions","strict","cooltime","intersounds","enhanced","tut_right","tut_wrong","tut_start","tut_finish","tut_max","keycal","actiontimes","ok_n","super_n","newlevel","oklevel","faillevel","superlevel","perfectlevel","alreadyplayed","lname","ln","lockerror","mp","ok","curlev","question","olv","tuts","tute","tutes","tuten","tutem","unlockeda","totala","tutorial","com","jng","failjng","perfectjng","superv","okjng","wait","lasts","lasta","lastsn","lastan","lastak","curline","mpos","loadp","packing","packnames","packfiles","mode","vos","presets","macrod","actions","creatingpack","lastscore","lastdiff","lastlevel","perfectrun","bad","good","ttsVoice","ttsRate","achs","editing","boot","mangle","langs","homedir","fade2","nopack","yespack","setup","focus","mkdirSync","checkPack","write","JSON","stringify","writeFileSync","changeBoot","parse","readFileSync","introing","counter","lm","stre","logo","download","url","dest","http","createWriteStream","response","pipe","close","startlev","menu","startgame","set_level","get_level","md","lineByLine","levfiles","levels","levname","locked","lock","line","toString","liner","lineNumber","lmenu","lv","macrostuff","olv2","choice","lev_vol","the_string","lines","w","achie","words","result","search","params","go","first_iter_count","temp","macros","macrot","built","macro","prs","timen","etimen","mrt","diff","added","ftime","fend","eadded","etime","freq","preset","endsnd","bksound","scrollingText","overlap","loadlev","looping","oldwell","total","wellc","levjing","well","ceil","st","setState","module","exports"],"mappings":"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","file":"main.js","sourceRoot":"js","sourcesContent":["'use strict';\r\nclass OldTimer {\r\n\tconstructor() {\r\n\t\tthis.elapsed;\r\n\t\tthis.paused = false;\r\n\t\tthis.lastTime = 0;\r\n\t\tthis.pauseWhen = 0;\r\n\t\tthis.started = true;\r\n\t}\r\n\r\n\tisActive() {\r\n\t\treturn !paused & started;\r\n\t}\r\n\r\n\tget elapsed() {\r\n\t\tif (this.paused) {\r\n\t\t\treturn this.pauseWhen - this.lastTime;\r\n\t\t}\r\n\t\treturn performance.now() - this.lastTime;\r\n\t}\r\n\r\n\tpause() {\r\n\t\tthis.paused = true;\r\n\t\tthis.pauseWhen = performance.now();\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.lastTime = performance.now();\r\n\t\tthis.pauseWhen = 0;\r\n\t\tthis.paused = false;\r\n\t\tthis.started = true;\r\n\t}\r\n\r\n\trestart() {\r\n\t\tthis.lastTime = performance.now();\r\n\t\tthis.pauseWhen = 0;\r\n\t\tthis.paused = false;\r\n\t\tthis.started = true;\r\n\t}\r\n\r\n\tresume() {\r\n\t\tthis.paused = false;\r\n\t\tthis.started = true;\r\n\t\tthis.lastTime += performance.now() - this.pauseWhen;\r\n\t}\r\n}\r\nexport { OldTimer };\r\n","\r\n'use strict';\r\nconst KeyEvent = {\r\nDOM_VK_CANCEL: 3,\r\n\t       DOM_VK_HELP: 6,\r\n\t       DOM_VK_BACK_SPACE: 8,\r\n\t       DOM_VK_TAB: 9,\r\n\t       DOM_VK_CLEAR: 12,\r\n\t       DOM_VK_RETURN: 13,\r\n\t       DOM_VK_ENTER: 14,\r\n\t       DOM_VK_SHIFT: 16,\r\n\t       DOM_VK_CONTROL: 17,\r\n\t       DOM_VK_ALT: 18,\r\n\t       DOM_VK_PAUSE: 19,\r\n\t       DOM_VK_CAPS_LOCK: 20,\r\n\t       DOM_VK_ESCAPE: 27,\r\n\t       DOM_VK_SPACE: 32,\r\n\t       DOM_VK_PAGE_UP: 33,\r\n\t       DOM_VK_PAGE_DOWN: 34,\r\n\t       DOM_VK_END: 35,\r\n\t       DOM_VK_HOME: 36,\r\n\t       DOM_VK_LEFT: 37,\r\n\t       DOM_VK_UP: 38,\r\n\t       DOM_VK_RIGHT: 39,\r\n\t       DOM_VK_DOWN: 40,\r\n\t       DOM_VK_PRINTSCREEN: 44,\r\n\t       DOM_VK_INSERT: 45,\r\n\t       DOM_VK_DELETE: 46,\r\n\t       DOM_VK_0: 48,\r\n\t       DOM_VK_1: 49,\r\n\t       DOM_VK_2: 50,\r\n\t       DOM_VK_3: 51,\r\n\t       DOM_VK_4: 52,\r\n\t       DOM_VK_5: 53,\r\n\t       DOM_VK_6: 54,\r\n\t       DOM_VK_7: 55,\r\n\t       DOM_VK_8: 56,\r\n\t       DOM_VK_9: 57,\r\n\t       DOM_VK_SEMICOLON: 59,\r\n\t       DOM_VK_EQUALS: 61,\r\n\t       DOM_VK_A: 65,\r\n\t       DOM_VK_B: 66,\r\n\t       DOM_VK_C: 67,\r\n\t       DOM_VK_D: 68,\r\n\t       DOM_VK_E: 69,\r\n\t       DOM_VK_F: 70,\r\n\t       DOM_VK_G: 71,\r\n\t       DOM_VK_H: 72,\r\n\t       DOM_VK_I: 73,\r\n\t       DOM_VK_J: 74,\r\n\t       DOM_VK_K: 75,\r\n\t       DOM_VK_L: 76,\r\n\t       DOM_VK_M: 77,\r\n\t       DOM_VK_N: 78,\r\n\t       DOM_VK_O: 79,\r\n\t       DOM_VK_P: 80,\r\n\t       DOM_VK_Q: 81,\r\n\t       DOM_VK_R: 82,\r\n\t       DOM_VK_S: 83,\r\n\t       DOM_VK_T: 84,\r\n\t       DOM_VK_U: 85,\r\n\t       DOM_VK_V: 86,\r\n\t       DOM_VK_W: 87,\r\n\t       DOM_VK_X: 88,\r\n\t       DOM_VK_Y: 89,\r\n\t       DOM_VK_Z: 90,\r\n\t       DOM_VK_CONTEXT_MENU: 93,\r\n\t       DOM_VK_NUMPAD0: 96,\r\n\t       DOM_VK_NUMPAD1: 97,\r\n\t       DOM_VK_NUMPAD2: 98,\r\n\t       DOM_VK_NUMPAD3: 99,\r\n\t       DOM_VK_NUMPAD4: 100,\r\n\t       DOM_VK_NUMPAD5: 101,\r\n\t       DOM_VK_NUMPAD6: 102,\r\n\t       DOM_VK_NUMPAD7: 103,\r\n\t       DOM_VK_NUMPAD8: 104,\r\n\t       DOM_VK_NUMPAD9: 105,\r\n\t       DOM_VK_MULTIPLY: 106,\r\n\t       DOM_VK_ADD: 107,\r\n\t       DOM_VK_SEPARATOR: 108,\r\n\t       DOM_VK_SUBTRACT: 109,\r\n\t       DOM_VK_DECIMAL: 110,\r\n\t       DOM_VK_DIVIDE: 111,\r\n\t       DOM_VK_F1: 112,\r\n\t       DOM_VK_F2: 113,\r\n\t       DOM_VK_F3: 114,\r\n\t       DOM_VK_F4: 115,\r\n\t       DOM_VK_F5: 116,\r\n\t       DOM_VK_F6: 117,\r\n\t       DOM_VK_F7: 118,\r\n\t       DOM_VK_F8: 119,\r\n\t       DOM_VK_F9: 120,\r\n\t       DOM_VK_F10: 121,\r\n\t       DOM_VK_F11: 122,\r\n\t       DOM_VK_F12: 123,\r\n\t       DOM_VK_F13: 124,\r\n\t       DOM_VK_F14: 125,\r\n\t       DOM_VK_F15: 126,\r\n\t       DOM_VK_F16: 127,\r\n\t       DOM_VK_F17: 128,\r\n\t       DOM_VK_F18: 129,\r\n\t       DOM_VK_F19: 130,\r\n\t       DOM_VK_F20: 131,\r\n\t       DOM_VK_F21: 132,\r\n\t       DOM_VK_F22: 133,\r\n\t       DOM_VK_F23: 134,\r\n\t       DOM_VK_F24: 135,\r\n\t       DOM_VK_NUM_LOCK: 144,\r\n\t       DOM_VK_SCROLL_LOCK: 145,\r\n\t       DOM_VK_COMMA: 188,\r\n\t       DOM_VK_PERIOD: 190,\r\n\t       DOM_VK_SLASH: 191,\r\n\t       DOM_VK_BACK_QUOTE: 192,\r\n\t       DOM_VK_OPEN_BRACKET: 219,\r\n\t       DOM_VK_BACK_SLASH: 220,\r\n\t       DOM_VK_CLOSE_BRACKET: 221,\r\n\t       DOM_VK_QUOTE: 222,\r\n\t       DOM_VK_META: 224\r\n};\r\nexport {KeyEvent};\r\n","import \"babel-polyfill\";\r\nconst walk = require('fs-walk')\r\n'use strict';\r\nclass GameUtils {\r\n\tcalculateDelta(lx, sx, sr = 0) {\r\n\t\tsx = sx + sr;\r\n\t\tif (sx < lx) {\r\n\t\t\tdelta = lx - sx;\r\n\t\t}\r\n\t\tif (sx > lx) {\r\n\t\t\tdelta = sx - lx;\r\n\t\t}\r\n\r\n\t}\r\n\tprogressPan(current, max) {\r\n\t\treturn ((current * 200 / max) - 100) / 100;\r\n\t}\r\n\r\n\tprogressPitch(current, min, max, minPitch, maxPitch) {\r\n\t\treturn (current / (min + max)) * (maxPitch - minPitch) + minPitch;\r\n\t}\r\n\r\n\tprogressVolume(current, min, max, minVolume, maxVolume) {\r\n\t\tif (current > max) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\treturn (current / (min + max)) * (maxVolume - minVolume) + minVolume;\r\n\t}\r\n\r\n\tgetProportion(current, min, max, minVolume, maxVolume) {\r\n\t\tif (current > max) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\treturn (current / (min + max)) * (maxVolume - minVolume) + minVolume;\r\n\t}\r\n\r\n\tdistance3D(x1, y1, z1, x2, y2, z2) {\r\n\t\treturn Math.sqrt((x2 - x1) * (x2 - x1) +\r\n\t\t\t(y2 - y1) * (y2 - y1) +\r\n\t\t\t(z2 - z1) * (z2 - z1));\r\n\t}\r\n\r\n\tdistance(jx, jy, kx, ky) {\r\n\t\t// Return Math.hypot(jx-kx, jy-ky)\r\n\t\treturn Math.sqrt(((jx - kx) * (jx - kx)) + ((jy - ky)) * (jy - ky));\r\n\t}\r\n\r\n\tcalculateAngle(x1, y1, x2, y2) {\r\n\t\tlet angle = Math.atan2((y2 - y1), (x2 - x1));\r\n\t\tangle = (angle >= 0) ? 0 : (2 * Math.PI) + angle;\r\n\t\treturn angle;\r\n\t\t// Return Math.atan2((y2 - y1),(x2 - x1));\r\n\t}\r\n\r\n\tisCollide3D(a, b) {\r\n\t\treturn (a.x <= (b.x + b.width) && (a.x + a.width) >= b.x) && (a.y <= (b.y + b.height) && (a.y + a.height) >= b.y) && (a.z <= (b.z + b.depth) && (a.z + a.depth) >= b.z);\r\n\t}\r\n\r\n\trandomInt(min, max) {\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t}\r\n\r\n\tgetRandomArbitrary(min, max) {\r\n\t\treturn Math.random() * (max - min) + min;\r\n\t}\r\n\r\n\tsleep(ms) {\r\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\r\n\t}\r\n\r\n\tpercent(int1, int2) {\r\n\t\treturn int1 * 100 / int2;\r\n\t}\r\n\r\n\tpercentOf(int1, int2) {\r\n\t\treturn int2 * int1 / 100;\r\n\t}\r\n\tpercentage(percented, value) {\r\n\t\treturn value * percented / 100;\r\n\t}\r\n\r\n\taverage(arr, startIndex = 0) {\r\n\t\tconst len = arr.length;\r\n\t\tlet val = 0;\r\n\t\tlet average = 0;\r\n\t\tif (arr.length < startIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfor (let i = startIndex; i < arr.length; i++) {\r\n\t\t\tval += arr[i];\r\n\t\t}\r\n\r\n\t\taverage = val / (len - startIndex);\r\n\t\treturn average;\r\n\t}\r\n\r\n\taverageInt(arr, startIndex = 0) {\r\n\t\tconst len = arr.length;\r\n\t\tlet val = 0;\r\n\t\tlet average = 0;\r\n\t\tif (arr.length < startIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tfor (let i = startIndex; i < arr.length; i++) {\r\n\t\t\tval += arr[i];\r\n\t\t}\r\n\r\n\t\taverage = val / (len - startIndex);\r\n\t\treturn Math.floor(average);\r\n\t}\r\n\r\n\tneg(num) {\r\n\t\treturn (num >= 0 ? (num == 0 ? 0 : 1) : -1);\r\n\t}\r\n\r\n\tnumericSort(a, b) {\r\n\t\treturn (a < b ? -1 : (a == b ? 0 : 1));\r\n\t}\r\n\r\n\tshuffle(a) {\r\n\t\tfor (let i = a.length - 1; i > 0; i--) {\r\n\t\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t\t[a[i], a[j]] = [a[j], a[i]];\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\t}\r\n\r\n\tobjSize(obj) {\r\n\t\tlet size = 0;\r\n\r\n\t\tlet key;\r\n\t\tfor (key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key)) {\r\n\t\t\t\tsize++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn size;\r\n\t}\r\n\tcopyObject(obj) {\r\n\t\treturn Object.assign(Object.create(Object.getPrototypeOf(obj)), obj);\r\n\t}\r\n\tarraysEqual(arr1, arr2) {\r\n\t\tfor (var i = 0; i < arr1.length; i++) {\r\n\r\n\t\t\tif (arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpauseTimeout(timerId) {\r\n\t\tlet start = Date.now();\r\n\t\tclearTimeout(timerId);\r\n\t};\r\n\r\n\tresumeTimeout(timerId) {\r\n\t\tremaining -= Date.now() - start;\r\n\t\treturn window.setTimeout(callback, remaining);\r\n\t};\r\n\trandomProperty(obj) {\r\n\t\tvar keys = Object.keys(obj)\r\n\t\treturn obj[keys[keys.length * Math.random() << 0]];\r\n\t};\r\n\t\tasync findFiles(path,ext=\"\") {\r\nlet list=[];\r\nlet fileExt=\"\";\r\nawait walk.filesSync(path, (pb, pf, stat, next) => {\r\nif (ext==\"\") {\r\nlist.push(pf);\r\n}\r\nelse {\r\nfileExt=pf.substr(0-ext.length,ext.length);\r\nif (fileExt==ext) {\r\nlist.push(pf);\r\n}\r\n}\r\n});\r\nreturn list;\r\n}\r\nasync findFolders(path) {\r\nlet list=[];\r\nawait walk.dirsSync(path, (pb, pf, stat, next) => {\r\nlist.push(pf);\r\n});\r\nreturn list;\r\n}\r\n}\r\nexport var utils = new GameUtils();\r\n","'use strict';\r\nimport { reportString, lang } from './main';\r\nimport { utils } from './utilities';\r\nimport { speech } from './tts';\r\nimport { ScrollingText } from './scrollingText';\r\nclass Strings {\r\n\tconstructor() {\r\n\t\tthis.strings = {};\r\n\t\tthis.strings[1] = {\r\n\t\t\tlang: \"English\",\r\n\t\t};\r\n\t\tthis.strings[2] = {\r\n\t\t\tlang: \"Spanish\",\r\n\t\t\tmainMenu: \"Menú principal\",\r\n\t\t\tdeleteAchievements: \"Borrar logros\",\r\n\t\t\tachievements: \"Logros\",\r\n\t\t\tchangeRate: \"Cambiar velocidad de la voz\",\r\n\t\t\tdownloadPacks: \"Descargar packs\",\r\n\t\t\tchangePack: \"Cambiar pack\",\r\n\t\t\tlevelSelect: \"Seleccionar nivel\",\r\n\t\t\tfileNotFound: \"Archivo no encontrado: %1\",\r\n\t\t\tpackError: \"Error! No hay packs instalados. Instala packs desde la página web\",\r\n\r\n\t\t};\r\n\t}\r\n\r\n\tget(what, rep = []) {\r\n\t\tlet str;\r\n\t\tif (typeof this.strings[lang][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[lang][what];\r\n\t\t} else if (typeof this.strings[1][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[1][what];\r\n\t\t} else {\r\n\t\t\treportString(what);\r\n\t\t\treturn what;\r\n\t\t}\r\n\t\trep.forEach((v, i) => {\r\n\t\t\tconst i1 = Number(i) + 1;\r\n\t\t\tstr = str.replace('%' + i1, v);\r\n\t\t});\r\n\t\treturn str;\r\n\t}\r\n\tspeak(what, rep = []) {\r\n\t\tlet str;\r\n\t\tif (typeof this.strings[lang][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[lang][what];\r\n\t\t} else if (typeof this.strings[1][what] !== 'undefined') {\r\n\t\t\tstr = this.strings[1][what];\r\n\t\t} else {\r\n\t\t\tspeech.speak(what);\r\n\t\t}\r\n\t\trep.forEach((v, i) => {\r\n\t\t\tconst i1 = Number(i) + 1;\r\n\t\t\tstr = str.replace('%' + i1, v);\r\n\t\t});\r\n\t\tspeech.speak(str);\r\n\t}\r\n\tasync check(lng) {\r\n\t\tlet len = utils.objSize(this.strings) - 2;\r\n\t\tfor (let i in this.strings[1]) {\r\n\t\t\tif (!this.strings[lng].hasOwnProperty(i)) {\r\n\t\t\t\tawait new ScrollingText(i + \": \" + this.strings[1][i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport var strings = new Strings();\r\n","const EventEmitter = require('events');\r\n'use strict';\r\nclass KeyboardInput extends EventEmitter {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.keyDown = [];\r\n\t\tthis.justPressed = [];\r\n\t\tthis.chars = [];\r\n\t\tthis.justReleased = [];\r\n\t\tthis.justPressedEventCallback = null;\r\n\t\tthis.charEventCallback = null;\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst that = this;\r\n\t\tdocument.addEventListener('keydown', event => {\r\n\t\t\tthat.handleKeyDown(event);\r\n\t\t});\r\n\t\tdocument.addEventListener('keyup', event => {\r\n\t\t\tthat.handleKeyUp(event);\r\n\t\t});\r\n\t\tdocument.addEventListener('keypress', event => {\r\n\t\t\tthat.handleChar(event);\r\n\t\t});\r\n\t}\r\n\tpause() {\r\n\t\tthis.isPaused = true;\r\n\t}\r\n\tresume() {\r\n\t\tthis.isPaused = false;\r\n\t}\r\n\thandleKeyDown(event) {\r\n\t\tif (this.keyDown[event.which] != true || typeof this.keyDown[event.which] === 'undefined') {\r\n\t\t\tthis.keyDown[event.which] = true;\r\n\t\t\tthis.justPressed[event.which] = true;\r\n\t\t\tthis.emit(event.which);\r\n\t\t\tthis.justReleased[event.which] = false;\r\n\t\t\tif (typeof this.justPressedEventCallback !== 'undefined' && this.justPressedEventCallback != null) {\r\n\t\t\t\tthis.justPressedEventCallback(event.which);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleChar(char) {\r\n\t\tif (char.which < 48 || char.which > 122) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (String.fromCharCode(char.which) != '') {\r\n\t\t\tthis.chars += String.fromCharCode(char.which);\r\n\t\t\tthis.emit(\"chr\" + String.fromCharCode(char.which));\r\n\t\t\tif (typeof this.charEventCallback !== 'undefined' && this.charEventCallback != null) {\r\n\t\t\t\tthis.charEventCallback(String.fromCharCode(char.which));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleKeyUp(event) {\r\n\t\tif (this.keyDown[event.which] == true) {\r\n\t\t\tthis.keyDown[event.which] = false;\r\n\t\t\tthis.justPressed[event.which] = false;\r\n\t\t\tthis.justReleased[event.which] = true;\r\n\t\t\tthis.emit(\"!\" + event.which);\r\n\t\t}\r\n\t\tthis.chars = '';\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.charEventCallback = null;\r\n\t\tthis.justPressedEventCallback = null;\r\n\t}\r\n\tisDown(event) {\r\n\t\tif (this.isPaused) return false;\r\n\t\treturn this.keyDown[event];\r\n\t}\r\n\r\n\tisJustPressed(event) {\r\n\t\tif (this.isPaused) return false;\r\n\t\tif (this.justPressed[event] == true) {\r\n\t\t\tthis.justPressed[event] = false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tisJustReleased(event) {\r\n\t\tif (this.justReleased[event]) {\r\n\t\t\tthis.justReleased[event] = false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tkeysDown() {\r\n\t\tconst kd = [];\r\n\t\tthis.keyDown.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn kd;\r\n\t}\r\n\r\n\tgetChars() {\r\n\t\tconst kd = this.chars;\r\n\t\tthis.chars = '';\r\n\t\treturn kd;\r\n\t}\r\n\r\n\tkeysPressed() {\r\n\t\tconst kd = [];\r\n\t\tthis.justPressed.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.justPressed.splice();\r\n\t\treturn kd;\r\n\t}\r\n\r\n\treleaseAllKeys() {\r\n\r\n\t}\r\n\r\n\tkeysReleased() {\r\n\t\tconst kd = [];\r\n\t\tthis.justReleased.forEach((v, i) => {\r\n\t\t\tif (v) {\r\n\t\t\t\tkd.push(i);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.justReleased.splice();\r\n\t\treturn kd;\r\n\t}\r\n}\r\n\r\nexport { KeyboardInput };\r\n","import \"babel-polyfill\";\r\nconst { app } = require('electron').remote;\r\nimport { report } from './main';\r\n\r\n'use strict';\r\n\r\nimport { strings } from './strings';\r\nimport { utils } from './utilities'\r\nimport { lang, ttsVoice, ttsRate } from './main';\r\nimport { KeyboardInput } from './input.js';\r\nimport { KeyEvent } from './keycodes';\r\nconst useWebTTS = true;\r\nimport Speech from 'speak-tts' // es6\r\nclass TTS {\r\n\tconstructor(webTTS = true) {\r\n\tthis.voices=[]\r\n\t\tthis.speechController = new KeyboardInput();\r\n\t\tthis.speechController.init();\r\n\t\tthis.ducking = false;\r\n\t\tif (lang == 1) this.lang = \"en\";\r\n\t\tif (lang == 2) this.lang = \"es\";\r\n\t\tthis.webTTS = webTTS;\r\n\t\tthis.synth = new Speech()\r\n\t\tthis.rate = 2;\r\n\t\tthis.speechController.justPressedEventCallback = (key) => {\r\n\t\t\tif (this.interrupt) this.speak(\"\", false);\r\n\t\t\tif (key == KeyEvent.VK_CONTROL || key == KeyEvent.DOM_VK_ESCAPE) {\r\n\t\t\t\tthis.speak(\"\", false);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.synth.init({\r\n\t\t\tlang: this.lang,\r\n\t\t\trate: this.rate,\r\n\t\t\tsplitSentences: false,\r\n\t\t})\r\n\t\t\t.then((data) => {\r\n\t\t\t\tthis.voices = data.voices;\r\n\t\t\t}).catch(e => {\r\n\t\t\t\treport(e);\r\n\t\t\t})\r\n\t}\r\n\tsetLanguage(lang) {\r\n\t\ttry {\r\n\t\t\tif (lang == 1) this.lang = \"en\";\r\n\t\t\tif (lang == 2) this.lang = \"es\";\r\n\t\t\tthis.synth.setLanguage(this.lang)\r\n\t\t} catch (err) {\r\n\t\t\treport(err);\r\n\t\t}\r\n\t}\r\n\tsetRate(r) {\r\n\t\tlet newRate = r;\r\n\t\tif (r < 1) newRate == 1;\r\n\t\tif (r > 10) newRate = 10;\r\n\t\tthis.rate = newRate;\r\n\t\tthis.synth.setRate(newRate);\r\n\t}\r\n\tspeak(text, queue = false) {\r\n\t\tlet sr = app.accessibilitySupportEnabled;\r\n\r\n\t\tif (sr) this.webTTS = false;\r\n\t\tif (!sr) this.webTTS = true;\r\n\t\tif (this.webTTS) {\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof text == \"number\") {\r\n\t\t\t\t\ttext = text + \".\";\r\n\t\t\t\t\t//we need this because some voices fail to process numbers. Why? Don't ask me.\r\n\t\t\t\t}\r\n\t\t\t\tthis.synth.speak({\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t\tqueue: queue,\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tonstart: () => {\r\n\t\t\t\t\t\t\tthis.duck();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonend: () => {\r\n\t\t\t\t\t\t\tthis.unduck();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonerror: (err) => {\r\n\t\t\t\t\t\t\t//this.setVoice(null,true);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} catch {\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.duck();\r\n\t\t\tdocument.getElementById('speech').innerHTML = '';\r\n\t\t\tconst para = document.createElement('p');\r\n\t\t\tpara.appendChild(document.createTextNode(text));\r\n\t\t\tdocument.getElementById('speech').appendChild(para);\r\n\t\t}\r\n\t} // End speak()\r\n\r\n\tsetWebTTS(tts) {\r\n\t\tthis.webTTS = tts;\r\n\t}\r\n\r\n\tstop() {\r\n\t\tif (this.webTTS) {\r\n\t\t\tthis.synth.cancel();\r\n\t\t}\r\n\t}\r\n\tasync changeRate() {\r\n\t\tlet rate = speech.rate;\r\n\t\tconst inp = new KeyboardInput();\r\n\t\tinp.init();\r\n\t\tstrings.speak('rating');\r\n\t\twhile (!inp.isJustPressed(KeyEvent.DOM_VK_RETURN)) {\r\n\t\t\tawait utils.sleep(5);\r\n\t\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_RIGHT)) {\r\n\t\t\t\trate += 0.25;\r\n\t\t\t\tif (rate > 10) rate = 10;\r\n\r\n\t\t\t\tspeech.setRate(rate)\r\n\t\t\t\tstrings.speak('newRate');\r\n\t\t\t}\r\n\t\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_LEFT)) {\r\n\t\t\t\trate -= 0.25;\r\n\t\t\t\tif (rate < 1) rate = 1;\r\n\t\t\t\tspeech.setRate(rate)\r\n\t\t\t\tstrings.speak('newRate');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\nchangeVoice(name) {\r\n\t\tlet voiceArray = []\r\n\t\t\t\tfor (var k in this.voices) {\r\n\t\tvoiceArray.push(this.voices[k].name)\r\n\t\t}\r\n\t\tif (voiceArray.includes(name)) {\r\n\t\tspeech.synth.setVoice(name);\r\n\t\t}\r\n\r\n}\r\n\tsetVoice(cb, silent = false) {\r\n\t\t//what language do we want?\r\n\t\tlet wl = \"en\";\r\n\t\tif (lang == 1) wl = \"en\";\r\n\t\tif (lang == 2) wl = \"es\";\r\n\t\tlet voiceArray = []\r\n\t\tfor (var k in this.voices) {\r\n\t\t\t//get the first part of the voice languages\r\n\t\t\tlet vl = this.voices[k].lang.split(\"-\")[0]\r\n\t\t\t//do we want this language?\r\n\t\t\tif (vl == wl) {\r\n\t\t\t\tvoiceArray.push(this.voices[k].name)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!silent) speech.speak(strings.get(\"selectVoice\", [voiceArray.length]));\r\n\t\tlet input = new KeyboardInput()\r\n\t\tlet selection = -1;\r\n\t\tinput.init();\r\n\t\tif (!silent) {\r\n\t\t\tinput.justPressedEventCallback = ((key) => {\r\n\t\t\t\tif (key == KeyEvent.DOM_VK_DOWN) {\r\n\t\t\t\t\tselection++;\r\n\t\t\t\t\tif (selection >= voiceArray.length) selection = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (key == KeyEvent.DOM_VK_UP) {\r\n\t\t\t\t\tselection--;\r\n\t\t\t\t\tif (selection <= -1) selection = voiceArray.length - 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (key != KeyEvent.DOM_VK_RETURN && (key == KeyEvent.DOM_VK_UP || key == KeyEvent.DOM_VK_DOWN)) { //dirty hack\r\n\t\t\t\t\tthis.synth.setVoice(voiceArray[selection]);\r\n\t\t\t\t\tspeech.speak(voiceArray[selection])\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//it is enter\r\n\t\t\t\t\tif (selection != -1) { //don't crash if it's -1.\r\n\t\t\t\t\t\tinput.destroy();\r\n\t\t\t\t\t\tif (typeof cb !== \"undefined\") {\r\n\t\t\t\t\t\t\tcb(voiceArray[selection])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn voiceArray[selection]\r\n\t\t\t\t\t}\r\n\t\t\t\t}//enter action\r\n\t\t\t});//callback\r\n\t\t} //not silent\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tthis.synth.setVoice(voiceArray[0]);\r\n\t\t\t\treturn voiceArray[0];\r\n\t\t\t} catch (err) {\r\n\t\t\t\treport(err);\r\n\t\t\t\tthis.synth.setVoice(voiceArray[1]);\r\n\t\t\t\treturn voiceArray[1];\r\n\t\t\t} // catch block\r\n\t\t}//else\r\n\t}//function\r\n\tduck() {\r\n\t\tif (this.ducking) return;\r\n\t\tthis.ducking = true;\r\n\t\tif (typeof this.ducker !== \"undefined\") this.ducker.duck();\r\n\t}\r\n\tunduck() {\r\n\t\tthis.ducking = false;\r\n\t\tif (typeof this.ducker !== \"undefined\") this.ducker.unduck();\r\n\t}\r\n\r\n} // End class\r\nconst speech = new TTS(false);\r\n//if (process.platform == 'darwin') {\r\n//\tspeech.webTTS = true;\r\n//}\r\nexport { TTS, speech };\r\n","import \"babel-polyfill\";\r\nimport { report } from './main';\r\nimport { speech } from './tts';\r\nimport panner from 'sono/effects/panner';\r\nconst EventEmitter = require('events');\r\nimport sono from 'sono';\r\nimport { KeyboardInput } from './input';\r\nimport { KeyEvent } from './keycodes';\r\nimport { utils } from './utilities';\r\npanner.defaults = {\r\n\tpanningModel: 'HRTF',\r\n\tmaxDistance: 50,\r\n};\r\nsono.playInBackground = true;\r\nvar playOnceTimer;\r\nclass SoundObjectItem extends EventEmitter {\r\n\tconstructor(file, callback = 0, tag = 0, stream = false) {\r\n\t\tsuper();\r\n\t\tthis.duckingFirstTime = true;\r\n\t\tthis.stream = stream;\r\n\t\tthis.panner = null;\r\n\t\tthis.fileName = file;\r\n\t\tif (typeof file == \"string\") {\r\n\t\t\tif (!stream) {\r\n\t\t\t\tthis.sound = sono.create({\r\n\t\t\t\t\tsrc: file,\r\n\t\t\t\t\tonComplete: () => { this.doneLoading(); }\r\n\t\t\t\t});\r\n\t\t\t\tthis.timeout = setTimeout(() => { this.checkProgress(); }, 2000);\r\n\t\t\t\tthis.loaded = false;\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.tag = tag;\r\n\t\t\t}\r\n\t\t\tif (stream) {\r\n\t\t\t\tthis.loaded = true;\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.tag = tag;\r\n\t\t\t\tthis.sound = sono.create(new Audio(file));\r\n\t\t\t\tthis.doneLoading();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (typeof file == \"object\") {\r\n\t\t\tthis.sound = sono.create(\"\");\r\n\t\t\tthis.sound.data = file;\r\n\t\t\tthis.loaded = false;\r\n\t\t\tthis.callback = callback;\r\n\t\t\tthis.tag = tag;\r\n\t\t\tthis.doneLoading();\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tget playbackRate() {\r\n\t\treturn this.sound.playbackRate\r\n\t}\r\n\r\n\tset playbackRate(v) {\r\n\t\treturn this.sound.playbackRate = v;\r\n\t}\r\n\tget pitch() {\r\n\t\treturn this.sound.playbackRate\r\n\t}\r\n\r\n\tset pitch(v) {\r\n\t\treturn this.sound.playbackRate = v;\r\n\t}\r\n\r\n\tset loop(v) {\r\n\t\tthis.sound.loop = v;\r\n\t}\r\n\r\n\tcheckProgress() {\r\n\t\tif (this.stream) return;\r\n\t\tif (this.sound.progress == 0) {\r\n\t\t\tthis.sound.destroy();\r\n\t\t\tthis.sound = sono.create({ src: this.fileName, onComplete: () => { this.doneLoading(); } }, this.stream);\r\n\t\t}\r\n\r\n\t\tif (this.sound.progress == 1) {\r\n\t\t\tthis.doneLoading();\r\n\t\t} else {\r\n\t\t\tthis.timeout = setTimeout(() => { this.checkProgress(); }, 500);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tdoneLoading() {\r\n\t\tif (!this.stream) clearTimeout(this.timeout);\r\n\t\tthis.loaded = true;\r\n\t\tif (this.callback != 0) {\r\n\t\t\tthis.callback();\r\n\t\t}\r\n\t}\r\n\treplay() {\r\n\t\tthis.sound.stop()\r\n\t\tthis.sound.play()\r\n\t}\r\n\tplay() {\r\n\t\t//sometimes, html element sounds complain about having a different connection, so wrap it in a try catch block.\r\n\t\ttry {\r\n\t\t\tthis.sound.play();\r\n\t\t} catch (err) {\r\n\t\t\t//report(err);\r\n\t\t\t//recreate the sound and replay\r\n\t\t\tif (this.stream) this.sound = sono.create(new Audio(this.fileName));\r\n\t\t\tif (!this.stream) this.sound = sono.create({\r\n\t\t\t\tsrc: this.fileName,\r\n\t\t\t\tonComplete: () => { this.doneLoading(); }\r\n\t\t\t});\r\n\t\t\tthis.sound.play();\r\n\t\t}\r\n\t}\r\n\tstop() {\r\n\t\tthis.sound.stop();\r\n\r\n\t}\r\n\tpause() {\r\n\t\tthis.sound.pause();\r\n\t}\r\n\tresume() {\r\n\t\tthis.sound.resume();\r\n\t}\r\n\tdestroy() {\r\n\t\ttry {\r\n\r\n\t\t\tthis.sound.destroy();\r\n\t\t} catch (err) {\r\n\r\n\t\t}\r\n\t}\r\n\tunload() { this.sound.destroy(); }\r\n\tduck(time) {\r\n\t\tif (this.duckingFirstTime) this.oldVolume = this.volume;\r\n\t\tthis.duckingFirstTime = false;\r\n\t\tthis.sound.fade(0.3, 0.15);\r\n\t}\r\n\tunduck(time) {\r\n\t\tthis.sound.fade(this.oldVolume, 0.15);\r\n\t}\r\n\tasync fade(time) {\r\n\t\tthis.sound.fade(0, time / 1000);\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t}, time);// End\r\n\t\t});// Promise\r\n\r\n\t}\r\n\r\n\tpos(x, y, z) {\r\n\r\n\t}\r\n\r\n\tforcePlay() {\r\n\t\tthis.sound.stop();\r\n\t\tthis.sound.play();\r\n\t}\r\n\tasync playSync(die = false) {\r\n\t\tconst inp = new KeyboardInput();\r\n\t\tinp.init();\r\n\t\tthis.sound.play();\r\n\r\n\t\tinp.justPressedEventCallback = (evt => {\r\n\t\t\tif (evt == KeyEvent.DOM_VK_Q || evt == KeyEvent.DOM_VK_X || evt == KeyEvent.DOM_VK_ESCAPE || evt == KeyEvent.DOM_VK_SPACE || evt == KeyEvent.DOM_VK_ENTER) {\r\n\t\t\t\tthis.sound.stop();\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.sound.once('ended', () => {\r\n\t\t\t\tthis.sound.removeAllListeners();\r\n\t\t\t\tif (die) this.sound.destroy();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t});// End\r\n\t\t\tthis.sound.once('stop', () => {\r\n\t\t\t\tthis.sound.removeAllListeners();\r\n\t\t\t\tif (die) this.sound.destroy();\r\n\t\t\t\tresolve('ok');\r\n\t\t\t\tinp.justPressedEventCallback = null;\r\n\t\t\t});// Stop\r\n\t\t});// Promise\r\n\t}\r\n\r\n\tget active() {\r\n\t\tif (!this.sound.loaded) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.sound.progress < 1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.sound.loaded) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t}\r\n\tget playing() {\r\n\t\treturn this.sound.playing;\r\n\t}\r\n\r\n\tget pan() {\r\n\t\tif (!this.panner) {\r\n\t\t\tthis.panner = this.sound.effects.add(panner());\r\n\t\t\tthis.currentPan = 0;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this.currentPan;\r\n\t}\r\n\r\n\tset pan(v) {\r\n\t\tif (!this.panner) {\r\n\t\t\tthis.panner = this.sound.effects.add(panner());\r\n\t\t}\r\n\t\tthis.currentPan = v;\r\n\t\treturn this.panner.set(v);\r\n\t}\r\n\tget volume() {\r\n\t\treturn this.sound.volume;\r\n\t}\r\n\tset volume(v) {\r\n\t\tthis.sound.volume = v;\r\n\t}\r\n\r\n\tseek(time) {\r\n\t\treturn this.sound.seek(time);\r\n\t}\r\n\r\n\tget currentTime() {\r\n\t\treturn this.sound.currentTime;\r\n\t}\r\n\r\n\tget duration() {\r\n\t\treturn this.sound.duration * 1000;\r\n\t}\r\n\r\n\tget position() {\r\n\t\treturn this.sound.currentTime;\r\n\t}\r\n\r\n\tset currentTime(v) {\r\n\t\treturn this.sound.seek(v);\r\n\t}\r\n\r\n}\r\n\r\nclass SoundObject {\r\n\tconstructor() {\r\n\t\tthis.sounds = new Array();\r\n\t\tthis.loadingQueue = false;\r\n\t\tthis.queueCallback = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tthis.loadedCallback = 0;\r\n\t\tthis.queue = new Array();\r\n\t\tthis.queueLength = 0;\r\n\t\tthis.statusCallback = null;\r\n\t\tthis.directory = \"./sounds/\";\r\n\t\tthis.extension = \".ogg\";\r\n\t\tthis.oneShots = new Array();\r\n\t\tthis.debug = false;\r\n\r\n\r\n\t\tthis.oneShotSound = null;\r\n\t}\r\n\tsetStatusCallback(callback) {\r\n\t\tthis.statusCallback = callback;\r\n\t}\r\n\tfindSound(file) {\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (this.sounds[i].fileName == file && this.sounds[i].loaded) {\r\n\t\t\t\treturn this.sounds[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfindSoundIndex(file) {\r\n\t\tfor (const i in this.sounds) {\r\n\t\t\tif (this.sounds[i].fileName == file) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\r\n\tresetQueuedInstance() {\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (typeof this.sounds[i] != \"undefined\") {\r\n\t\t\t\tif (this.sounds[i].tag == 1) {\r\n\t\t\t\t\tthis.sounds[i].sound.destroy();\r\n\t\t\t\t\tthis.sounds.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.loadingQueue = false;\r\n\t\tthis.queueCallback = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tthis.loadedCallback = 0;\r\n\t\tthis.queue = new Array();\r\n\t\tthis.queueLength = 0;\r\n\t\tthis.statusCallback = null;\r\n\t}\r\n\r\n\r\n\r\n\tcreate(file, stream = false) {\r\n\t\tfile = this.directory + file + this.extension;\r\n\t\tlet found = -1;\r\n\t\tfound = this.findSound(file);\r\n\t\tlet returnObject = null;\r\n\t\tif (found == -1 || found.sound.data == null) {\r\n\t\t\treturnObject = new SoundObjectItem(file, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\tthis.sounds.push(returnObject);\r\n\t\t} else {\r\n\t\t\treturnObject = new SoundObjectItem(found.sound.data, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\treturnObject.fileName = found.fileName;\r\n\t\t}\r\n\t\treturnObject.fileName = file; //otherwise html element fileNames get fucked up.\r\n\t\treturn returnObject;\r\n\t}\r\n\tasync loadQueueSync() {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tso.setQueueCallback(() => {\r\n\t\t\t\tresolve(true);\r\n\t\t\t});\r\n\t\t\tso.loadQueue();\r\n\t\t});\r\n\t}\r\n\tasync createSync(file, stream = false) {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tfile = this.directory + file + this.extension;\r\n\t\t\tlet found = -1;\r\n\t\t\tfound = this.findSound(file);\r\n\t\t\tlet returnObject = null;\r\n\t\t\tif (found == -1 || found.sound.data == null) {\r\n\t\t\t\treturnObject = new SoundObjectItem(file, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\t\tthis.sounds.push(returnObject);\r\n\t\t\t\tif (stream) resolve(returnObject);\r\n\t\t\t} else {\r\n\t\t\t\treturnObject = new SoundObjectItem(found.sound.data, () => { if (!stream) this.doneLoading(); }, 0, stream);\r\n\t\t\t\tresolve(returnObject);\r\n\t\t\t}\r\n\t\t\treturnObject.fileName = file; //otherwise html element fileNames get fucked up.\r\n\t\t\tif (stream) resolve(returnObject);\r\n\t\t\tif (!stream) {\r\n\t\t\t\treturnObject.sound.once('loaded', () => {\r\n\t\t\t\t\tresolve(returnObject);\r\n\t\t\t\t\tthis.doneLoading();\r\n\t\t\t\t});// End\r\n\t\t\t}//stream\r\n\t\t});// Promise\r\n\t}\r\n\tasync playSync(file) {\r\n\t\tlet snd = await so.createSync(file);\r\n\t\tawait snd.playSync();\r\n\t\tsnd.destroy();\r\n\t}\r\n\r\n\tenqueue(file, stream = false) {\r\n\t\tfile = this.directory + file + this.extension;\r\n\t\tthis.queue.push({ file, stream });\r\n\t\tthis.queueLength = this.queue.length;\r\n\t}\r\n\r\n\tloadQueue() {\r\n\r\n\t\tthis.handleQueue();\r\n\t\tthis.loadingQueue = true;\r\n\r\n\t}\r\n\tsetQueueCallback(callback) {\r\n\t\tthis.queueCallback = callback;\r\n\t}\r\n\tresetQueue() {\r\n\t\tthis.queue = [];\r\n\t\tthis.loadingQueue = false;\r\n\t}\r\n\thandleQueue() {\r\n\t\tif (this.queue.length > 0) {\r\n\t\t\tif (typeof this.statusCallback != \"undefined\" && this.statusCallback != null) {\r\n\t\t\t\tthis.statusCallback(1 - this.queue.length / this.queueLength);\r\n\t\t\t}\r\n\t\t\tif (this.findSound(this.queue[0].file) != -1) {\r\n\t\t\t\tthis.queue.splice(0, 1);\r\n\t\t\t\tthis.handleQueue();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet file = this.queue[0].file;\r\n\t\t\tlet stream = this.queue[0].stream;\r\n\t\t\tthis.queue.splice(0, 1);\r\n\t\t\tthis.sounds.push(new SoundObjectItem(file, () => { this.handleQueue(); }, 1, stream));\r\n\r\n\t\t} else {\r\n\t\t\tthis.loadingQueue = false;\r\n\t\t\tif (typeof this.queueCallback != \"undefined\" && this.queueCallback != 0) {\r\n\t\t\t\tthis.queueCallback();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tsetCallback(callback) {\r\n\t\tthis.loadedCallback = callback;\r\n\t}\r\n\tdoneLoading() {\r\n\t\tlet result = this.isLoading();\r\n\r\n\t\tif (result == 1) {\r\n\r\n\t\t\tif (typeof this.loadedCallback != \"undefined\" && this.loadedCallback != 0 && this.loadedCallback != null) {\r\n\t\t\t\tthis.loadedCallback();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisLoading() {\r\n\t\tlet loading = 0;\r\n\t\tthis.loadedSounds = 0;\r\n\t\tthis.loadingSounds = 0;\r\n\t\tlet stillLoading = new Array();\r\n\t\tfor (let i = 0; i < this.sounds.length; i++) {\r\n\t\t\tif (typeof this.sounds[i] != \"undefined\") {\r\n\t\t\t\tif (this.sounds[i].loaded == false) {\r\n\t\t\t\t\tthis.loadingSounds++;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loadedSounds++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.loadedSounds / this.sounds.length;\r\n\t}\r\n\r\n\tplayOnce(file) {\r\n\t\tthis.oneShotSound = this.create(file).sound;\r\n\t\tthis.oneShotSound.stop();\r\n\t\tthis.oneShotSound.play();\r\n\t\tthis.oneShotSound.on(\"ended\", () => {\r\n\t\t\tif (this.oneShotSound.playing == false) this.oneShotSound.destroy();\r\n\t\t});\r\n\r\n\t}\r\n\tdestroy(file, callback = 0) {\r\n\t\tlet noMore = false;\r\n\t\tconst filename = this.directory + file + this.extension;\r\n\t\twhile (!noMore) {\r\n\t\t\tconst found = this.findSoundIndex(filename);\r\n\t\t\tif (found == -1) {\r\n\t\t\t\tnoMore = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.sounds[found].sound.unload();\r\n\t\t\t\tthis.sounds.splice(found, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (callback != 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\tkill(callback = 0) {\r\n\t\twhile (this.sounds.length > 0) {\r\n\t\t\tthis.sounds.splice(0, 1);\r\n\t\t}\r\n\r\n\t\tsono.destroyAll();\r\n\t\tif (callback != 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n}\r\nexport let so = new SoundObject();","import \"babel-polyfill\";\r\n'use strict';\r\nimport { KeyEvent } from './keycodes';\r\nimport { so } from './soundObject';\r\nimport { speech } from './tts';\r\nimport copy from 'copy-to-clipboard';\r\nfunction sos() {\r\n\tso.old = so.directory;\r\n\tso.directory = \"./sounds/\";\r\n}\r\nfunction sop() {\r\n\tso.directory = so.old;\r\n}\r\nif (runningText == undefined) {\r\n\tvar runningText = 0;\r\n}\r\nclass ScrollingText {\r\n\tconstructor(text, delimiter = '\\n', callback = 0) {\r\n\t\tthis.callback = callback;\r\n\r\n\t\tthis.text = text;\r\n\t\tthis.delimiter = delimiter;\r\n\t\tthis.splitText = this.text.split(delimiter);\r\n\t\tthis.currentLine = 0;\r\n\t\tsos();\r\n\t\tthis.sndOpen = so.create('ui/textOpen');\r\n\t\tthis.sndContinue = so.create('ui/textScroll');\r\n\t\tthis.sndClose = so.create('ui/textClose');\r\n\t\tsop();\r\n\t\tconst id = document.getElementById('touchArea');\r\n\t\t// This.hammer = new Hammer(id);\r\n\t\tthis.init();\r\n\t\tif (this.callback == 0) {\r\n\t\t\treturn this.prom = new Promise(resolve => {\r\n\t\t\t\tthis.res = resolve;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst that = this;\r\n\t\trunningText = this;\r\n\t\tdocument.addEventListener('keydown', this.handleKeys);\r\n\t\t// This.hammer.on(\"swipeleft swiperight\", function() { that.handleTap(0); });\r\n\t\t// this.hammer.on(\"tap\", function() { that.handleTap(1); });\r\n\t\tthis.sndOpen.play();\r\n\t\tthis.currentLine = 0;\r\n\t\tthis.readCurrentLine();\r\n\t}\r\n\r\n\thandleKeys(event) {\r\n\t\tswitch (event.which) {\r\n\t\t\tcase KeyEvent.DOM_VK_UP:\r\n\t\t\tcase KeyEvent.DOM_VK_DOWN:\r\n\t\t\tcase KeyEvent.DOM_VK_LEFT:\r\n\t\t\tcase KeyEvent.DOM_VK_RIGHT:\r\n\t\t\t\trunningText.readCurrentLine();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_C:\r\n\t\t\t\trunningText.copyCurrentLine();\r\n\t\t\t\tbreak;\r\n\t\t\tcase KeyEvent.DOM_VK_RETURN:\r\n\t\t\t\trunningText.advance();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\thandleTap(action) {\r\n\t\tif (action == 0) {\r\n\t\t\tthis.readCurrentLine();\r\n\t\t}\r\n\r\n\t\tif (action == 1) {\r\n\t\t\tthis.advance();\r\n\t\t}\r\n\t}\r\n\r\n\treadCurrentLine() {\r\n\t\tif (this.splitText[this.currentLine].trim()[0] == '!') {\r\n\t\t\tconst str = this.splitText[this.currentLine].trim().substr(1);\r\n\t\t\tsos();\r\n\t\t\tconst snd = so.create(str, true);\r\n\t\t\tsop();\r\n\t\t\tsnd.play();\r\n\t\t\tsnd.sound.once('end', () => {\r\n\t\t\t\tthis.advance();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tspeech.speak(this.splitText[this.currentLine]);\r\n\t\t}\r\n\t}\r\n\tcopyCurrentLine() {\r\n\t\tcopy(this.splitText[this.currentLine]);\r\n\t\tthis.advance();\r\n\t}\r\n\r\n\tadvance() {\r\n\t\tif (this.currentLine < this.splitText.length - 1) {\r\n\t\t\tthis.currentLine++;\r\n\t\t\tthis.sndContinue.play();\r\n\t\t\tthis.readCurrentLine();\r\n\t\t} else {\r\n\t\t\tthis.sndClose.play();\r\n\t\t\tthis.sndClose.unload();\r\n\t\t\tthis.sndOpen.unload();\r\n\t\t\tthis.sndContinue.unload();\r\n\t\t\tdocument.removeEventListener('keydown', this.handleKeys);\r\n\t\t\t//\t\t\tThis.hammer.unload();\r\n\t\t\tif (this.callback != 0) {\r\n\t\t\t\tthis.callback();\r\n\t\t\t} else {\r\n\t\t\t\tthis.res();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport { ScrollingText, speech };\r\n","'use strict';\r\nimport sono from 'sono';\r\nimport { so } from './soundObject';\r\nimport panner from 'sono/effects/panner';\r\npanner.defaults = {\r\n\tpanningModel: 'HRTF',\r\n\tmaxDistance: 50,\r\n};\r\n/** Simple wrapper for agk-soundobject to quickly create 3D sound sources.\r\n* @constructor\r\n\t* @param {string} file - the path to the file without base directory and extension.\r\n\t* @param {number} x - Initial X coordinate of the sound\r\n\t* @param {number} y - Initial Y coordinate of the sound\r\n\t* @param {number} z - Initial Z coordinate of the sound\r\n\t* @param {boolean} loop - True if the sound should loop\r\n\t* @return {object} A Sound Source object\r\n*/\r\nexport class SoundSource {\r\n\tconstructor(file, x = 0, y = 0, z = 0) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.sound = son.create(file);\r\n\t\tthis.pan = this.sound.effects.add(panner());\r\n\t\tthis.pos(this.x, this.y, this.z);\r\n\t\tthis.rate = 1;\r\n\t\tthis.speed = 0;\r\n\t\tthis.minRate = 0.8;\r\n\t\tthis.maxRate = 1.2;\r\n\t\tthis.toDestroy = false;\r\n\t\tthis.rateShiftSpeed = 0.015;\r\n\t\tthis.sound.currentPosition = 0;\r\n\t}\r\n\tset loop(v) {\r\n\t\tthis.sound.loop = v;\r\n\t}\r\n\t/** Plays the sound source */\r\n\tplay() {\r\n\t\t// This.sound.seek(0);\r\n\t\tthis.sound.play();\r\n\t}\r\n\r\n\t/** Positions the sound source in 3D space.\r\n\t* @param {number} x - The new X coordinate of the sound\r\n\t* @param {number} y - The new Y coordinate of the sound\r\n\t* @param {number} z - The new Z coordinate of the sound\r\n*/\r\n\tpos(x, y, z) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.pan.setPosition(x, y, z);\r\n\t}\r\n\r\n\t/** Empty update method */\r\n\tupdate() {\r\n\t}\r\n}","import { SoundSource } from './soundSource.js';\r\nimport { so } from './soundObject.js';\r\n\r\nclass SoundHandler {\r\n\tconstructor(directional = false) {\r\n\t\tthis.staticSounds = [];\r\n\t\tthis.dynamicSounds = [];\r\n\t\tthis.currentDynamicSound = 0;\r\n\t\tthis.maxDynamicSounds = 512;\r\n\t\tthis.currentStaticSound = 0;\r\n\t\tthis.maxStaticSounds = 512;\r\n\t\tthis.reuseSounds = true;\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t\tthis.z = 0;\r\n\t\tthis.directional = directional;\r\n\t}\r\n\r\n\tplayStatic(file, loop = 1, slot = -1, stream = false) {\r\n\t\tif (slot = -1) {\r\n\t\t\tslot = this.findFreeStaticSlot();\r\n\t\t}\r\n\t\tthis.staticSounds[slot] = new SoundItem(file, this.directional, stream);\r\n\t\tif (loop == 1) {\r\n\t\t\tthis.staticSounds[slot].sound.loop = true;\r\n\t\t}\r\n\t\tthis.staticSounds[slot].sound.play();\r\n\t\treturn slot;\r\n\t}\r\n\r\n\tfindFreeStaticSlot() {\r\n\t\tfor (let i = 0; i < this.maxStaticSounds; i++) {\r\n\t\t\tif (this.staticSounds[i] == -1 || typeof this.staticSounds[i] === 'undefined') {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.currentStaticSound < this.maxStaticSounds) {\r\n\t\t\tthis.currentStaticSound++;\r\n\t\t\treturn this.currentStaticSound;\r\n\t\t}\r\n\t\tthis.currentStaticSound = 0;\r\n\t\treturn this.currentStaticSound;\r\n\t}\r\n\r\n\tfindFreeDynamicSlot() {\r\n\t\tfor (let i = 0; i < this.maxDynamicSounds; i++) {\r\n\t\t\tif (this.dynamicSounds[i] == -1 || typeof this.dynamicSounds[i] === 'undefined') {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.currentDynamicSound < this.maxDynamicSounds) {\r\n\t\t\tthis.currentDynamicSound++;\r\n\t\t\treturn this.currentDynamicSound;\r\n\t\t}\r\n\t\tthis.currentDynamicSound = 0;\r\n\t\treturn this.currentDynamicSound;\r\n\t}\r\n\r\n\tfindDynamicSound(file) {\r\n\t\tfor (let i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\tif (this.dynamicSounds[i].file == file) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tplay(file) {\r\n\t\tlet slot = 0;\r\n\r\n\t\tlet reuse = 0;\r\n\t\tif (this.reuseSounds) {\r\n\t\t\tslot = this.findDynamicSound(file);\r\n\t\t\treuse = true;\r\n\t\t}\r\n\t\tif (slot == -1 || this.reuseSounds == false) {\r\n\t\t\tslot = this.findFreeDynamicSlot();\r\n\t\t\treuse = false;\r\n\t\t}\r\n\t\tif (typeof this.dynamicSounds[slot] === 'undefined') {\r\n\t\t\tif (reuse == false) {\r\n\t\t\t\tthis.dynamicSounds[slot] = new SoundItem(file, this.directional);\r\n\t\t\t}\r\n\t\t} else if (reuse == false) {\r\n\t\t\tthis.dynamicSounds[slot].sound.destroy();\r\n\t\t\tthis.dynamicSounds[slot] = new SoundItem(file, directional);\r\n\t\t}\r\n\t\tthis.dynamicSounds[slot].sound.play();\r\n\t}\r\n\r\n\tupdate(position) {\r\n\t\tif (this.directional == true) {\r\n\t\t\tfor (let i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\t\tthis.dynamicSounds[i].sound.pos(position.x, position.y, position.z);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tfor (var i = 0; i < this.dynamicSounds.length; i++) {\r\n\t\t\tthis.dynamicSounds[i].destroy();\r\n\t\t\tthis.dynamicSounds.splice(i, 1);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.staticSounds.length; i++) {\r\n\t\t\tthis.staticSounds[i].destroy();\r\n\t\t\tthis.staticSounds.splice(i, 1);\r\n\t\t}\r\n\t}\r\n}\r\nclass SoundItem {\r\n\tconstructor(file, threeD = false, stream = false) {\r\n\t\tthis.file = file;\r\n\t\tthis.threeD = threeD;\r\n\t\tif (this.threeD == true) {\r\n\t\t\tthis.sound = new SoundSource(file, 0, 0, 0);\r\n\t\t} else {\r\n\t\t\tthis.sound = so.create(file, stream);\r\n\t\t}\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.sound.destroy();\r\n\t}\r\n}\r\n\r\nexport { SoundHandler };\r\n","import {ScrollingText} from './scrollingText';\r\nvar main=require('./main');\r\nimport {speech} from './tts';\r\nimport {SoundHandler} from './soundHandler';\r\nimport {getAch,debugmode,perfectrun,held,good,bad,pool,path} from './main';\r\nimport {so} from './soundObject';\r\nexport let lsd;\r\n\r\nexport let lad;\r\nexport async function preload_add(filename) {\r\nconsole.log(filename);\r\nreturn;\r\nlet files=filename.split(\",\");\r\nconst fs=require('fs');\r\nfor (let i=0;i<files.length;i++) {\r\nfilename=files[i];\r\nif(!fs.existsSync(path+filename+\".ogg\")){\r\nawait new ScrollingText(\"preload error \"+filename);\r\nreturn false;\r\n}\r\nso.enqueue(filename);\r\n}\r\nreturn true;\r\n}\r\nexport async function preload(filename) {\r\nconst fs=require('fs');\r\nif(!fs.existsSync(path+filename+\".ogg\")){\r\nawait new ScrollingText(\"preload sync error \"+filename);\r\nreturn false;\r\n}\r\nreturn new Promise((resolve,reject)=> {\r\nso.enqueue(filename);\r\nso.setQueueCallback(()=> {\r\nresolve();\r\n});\r\nso.loadQueue();\r\n});\r\n}\r\nclass Snd {\r\nconstructor(n,p,i,v,t,a,achi) {\r\nlsd=this.duration;\r\nthis.ach=achi;\r\nthis.name=n;\r\nthis.pan=p;\r\nthis.pitch=i;\r\nthis.alias=a;\r\nthis.bgtVolume=v;\r\nthis.duration=t;\r\npreload_add(this.name);\r\n}\r\nasync play() {\r\nif (typeof this.alias!==\"undefined\") {\r\nlet aliasa=this.alias.split(\",\");\r\nfor (let i=0;i<aliasa.length;i++) {\r\nif (!main.aliases.hasOwnProperty(aliasa[i])) {\r\nif (this.failreq!=\"\") {\r\nlet files=this.failreq.split(\",\");\r\nlet suc;\r\nif (files.length==1) {\r\nsuc=pool.playStatic(files[0],false);\r\nsuc.pan=this.pan;\r\nsuc.pitch=this.pitch;\r\nsuc.bgtVolume=this.volume;\r\n}\r\nelse {\r\nfor (let i=0;i<files.length;i++) {\r\nsuc=pool.playStatic(files[i],false);\r\nsuc.pan=this.pan;\r\nsuc.pitch=this.pitch;\r\nsuc.bgtVolume=this.volume;\r\n}\r\n}\r\n}\r\nreturn;\r\n}\r\nelse {\r\nmain.aliases[aliasa[i]]=null;\r\n}\r\n}\r\n}\r\nif (this.ach!=\"\" && !debugmode) {\r\nawait getAch(ach);\r\n}\r\nlet files=this.name.split(\",\");\r\nlet suc;\r\nif (files.length==1) {\r\nsuc=pool.playStatic(files[0],false);\r\nsuc.pan=this.pan;\r\nsuc.pitch=this.pitch;\r\nsuc.bgtVolume=this.volume;\r\n}\r\nelse {\r\nfor (let i=0;i<files.length;i++) {\r\nsuc=pool.playStatic(files[i],false);\r\nsuc.pan=this.pan;\r\nsuc.pitch=this.pitch;\r\nsuc.bgtVolume=this.volume;\r\n}\r\n}\r\n\r\n}\r\n}\r\nclass Action {\r\nconstructor(n,p,i,v,t,f,e,l,k,a,bks,achi,ty,eti,ends,efa,kp) {\r\nthis.played=false;\r\nthis.released=false;\r\nthis.held=false;\r\nthis.killperfect=false;\r\nthis.name=\"\";\r\nthis.apool=new SoundHandler();\r\nthis.alias=\"\";\r\nthis.bk=\"\";\r\nthis.pitch=100;\r\nthis.bgtVolume=0;\r\nthis.ach=\"\";\r\nthis.failsound=\"\";this.earlysound=\"\";this.latesound=\"\";this.efailsound=\"\";\r\nthis.pan=100;\r\nthis.key=\"\";\r\nthis.type=0;\r\nthis.end=0;\r\nthis.duration=0;\r\nthis.endsound=\"\";\r\nlsd=this.duration;\r\nif (kp==true) this.killperfect=true;\r\nthis.endsound=ends;\r\nthis.name=n;\r\nthis.efailsound=efa;\r\nthis.type=ty;\r\nthis.end=eti;\r\nthis.ach=achi;\r\nthis.bk=bks;\r\nthis.alias=a;\r\nif (typeof this.alias!==\"undefined\") {\r\n//alert(\"action alias\",alias);\r\n}\r\nthis.pan=p;\r\nthis.pitch=i;\r\nthis.failsound=f;\r\nthis.earlysound=e;\r\nthis.latesound=l;\r\nthis.bgtVolume=v;\r\nthis.key=k;\r\nthis.duration=t;\r\npreload_add(this.name);\r\npreload_add(this.failsound);\r\npreload_add(this.earlysound);\r\npreload_add(this.latesound);\r\nif (this.type==2) preload_add(this.efailsound);\r\nif (this.type==2) preload_add(this.endsound);\r\npreload_add(this.bk);\r\n}\r\nasync play() {\r\nthis.played=true;\r\nmain.cooldown=false;\r\nmain.cooler.restart();main.cooler.pause();\r\ngood++;\r\nthis.held=true;\r\nif (typeof this.alias!==\"undefined\") {\r\nmain.aliases[this.alias]=\"ok\";\r\n//if (debugmode and !perfectrun) rd.say(\"alias \"+alias);\r\n}\r\nif (this.ach!=\"\" && !debugmode) {\r\nif (this.type==1) get_ach(this.ach);\r\n}\r\nlet files=this.name.split(\",\");\r\nlet suc;\r\nif (files.length==1) {\r\nif (this.type==2) {\r\nsuc=this.apool.playStatic(files[0],false);\r\nsuc.pan=this.pan;\r\nsuc.pitch=this.pitch;\r\nsuc.bgtVolume=this.volume;\r\n}\r\nif (this.type==1) {\r\nsuc=pool.playStatic(files[0],false);\r\nsuc.pan=this.pan;\r\nsuc.pitch=this.pitch;\r\nsuc.bgtVolume=this.volume;\r\n}\r\n}\r\nelse {\r\nfor (let i=0;i<files.length;i++) {\r\nif (this.type==2) {\r\nsuc=this.apool.playStatic(files[i],false);\r\nsuc.pan=this.pan;\r\nsuc.pitch=this.pitch;\r\nsuc.bgtVolume=this.volume;\r\n}\r\nif (this.type==1) {\r\nsuc=pool.playStatic(files[i],false);\r\nsuc.pan=this.pan;\r\nsuc.pitch=this.pitch;\r\nsuc.bgtVolume=this.volume;\r\n}\r\n}\r\n}\r\n}\r\nstop() {\r\nif (debugmode) return;\r\nthis.apool.destroy();\r\n}\r\nasync release() {\r\ngood++;\r\nthis.held=false;\r\nthis.released=true;\r\nif (this.type!=2) return;\r\nthis.stop();\r\nif (typeof this.alias!==\"undefined\") {\r\nmain.aliases[this.alias]=\"ok\";\r\n}\r\nif (typeof ach!==\"undefined\" && !debugmode) {\r\nget_ach(ach);\r\n}\r\nlet files=this.endsound.split(\",\");\r\nthis.apool.destroy();\r\nlet suc;\r\nif (files.length==1) {\r\nsuc=pool.playStatic(files[0],false);\r\nsuc.pan=this.pan;\r\nsuc.pitch=this.pitch;\r\nsuc.bgtVolume=this.volume;\r\n}\r\nelse {\r\nfor (let i=0;i<files.length;i++) {\r\nsuc=pool.playStatic(files[i],false);\r\nsuc.pan=this.pan;\r\nsuc.pitch=this.pitch;\r\nsuc.bgtVolume=this.volume;\r\n}\r\n}\r\n}\r\nasync early() {\r\nmain.aliases[this.alias]=null;\r\nmain.cooldown=true;\r\nmain.cooler.restart();\r\nbad++;\r\nif (this.killperfect) main.perfect=false;\r\nlet suc=pool.playStatic(this.earlysound,false);\r\n}\r\nasync badkey() {\r\nmain.cooldown=true;\r\nmain.cooler.restart();\r\nlet suc=pool.playStatic(this.bk,false);\r\n}\r\nasync late() {\r\nmain.cooldown=true;\r\nmain.cooler.restart();\r\nmain.aliases[this.alias]=null;\r\nbad++;\r\nif (this.killperfect) main.perfect=false;\r\nlet suc=pool.playStatic(this.latesound,false);\r\n}\r\nasync fail() {\r\nmain.cooldown=true;\r\nmain.cooler.restart();\r\nbad++;\r\nif (this.killperfect) main.perfect=false;\r\nthis.stop();\r\nmain.aliases[this.alias]=null;\r\nlet suc=pool.playStatic(this.failsound,false);\r\n}\r\nasync efail() {\r\nbad++;\r\nif (this.killperfect) main.perfect=false;\r\nmain.aliases[this.alias]=null;\r\nthis.stop();\r\nlet suc=pool.playStatic(this.efailsound,false);\r\n}\r\n}\r\nclass Intersound {\r\nconstructor() {\r\nthis.time=0;\r\nthis.held=false;\r\nthis.key=1;\r\nthis.end=0;\r\nthis.snd=\"\";\r\n}\r\n}\r\nexport {Intersound,Snd,Action}","'use strict';\r\nimport fs from 'fs';\r\nimport os from 'os';\r\nimport { KeyEvent } from './keycodes';\r\nimport { pack, packdir } from './main';\r\nimport { ScrollingText } from './scrollingText';\r\n\r\nclass Player {\r\n\tconstructor() {\r\n\t\tthis.beatcoins = 0,\r\n\t\t\tthis.pack = 'default',\r\n\t\t\tthis.allowSave = false;\r\n\t\tthis.save = {};\r\n\t\tthis.actionKeys = [0, 0, KeyEvent.DOM_VK_SPACE, KeyEvent.DOM_VK_TAB, KeyEvent.DOM_VK_RETURN, KeyEvent.DOM_VK_BACK_SPACE, KeyEvent.DOM_VK_UP, KeyEvent.DOM_VK_DOWN, KeyEvent.DOM_VK_RIGHT, KeyEvent.DOM_VK_LEFT];\r\n\t\tthis.unlocks = {};\r\n\t\tthis.unlocks.default = {\r\n\t\t\tlevel: 0,\r\n\t\t\tfails: 0,\r\n\t\t\twin: false,\r\n\t\t\taverage: 0\r\n\t\t};\r\n\t}\r\n}\r\nexport { Player };\r\n","'use strict';\r\nimport { report } from './main';\r\nimport { speech } from './tts';\r\nimport { so } from './soundObject';\r\nconst MenuTypes = {\r\n\tNORMAL: 0,\r\n\tSELECTOR: 1,\r\n\tSLIDER: 2,\r\n\tEDIT: 3,\r\n\tAUDIO: 4,\r\n};\r\nclass MenuItem {\r\n\tconstructor(id, name, shortcut = \"\") {\r\n\t\tthis.name = name;\r\n\t\tthis.shortcut = shortcut;\r\n\t\tthis.id = id;\r\n\t\tthis.type = MenuTypes.NORMAL;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tif (this.shortcut == \"\") speech.speak(this.name);\r\n\t\tif (this.shortcut != \"\") speech.speak(this.name + \" (\" + this.shortcut + \")\");\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\nclass AudioItem extends MenuItem {\r\n\tconstructor(id, name) {\r\n\t\tsuper();\r\n\t\tthis.name = name;\r\n\t\tthis.type = MenuTypes.AUDIO;\r\n\t\tthis.id = id;\r\n\t\tthis.snd = so.create(this.name);\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tthis.snd.stop();\r\n\t\tthis.snd.play();\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\n\r\n\r\nclass SelectorItem extends MenuItem {\r\n\tconstructor(id, name, options, defaultOption = 0, selectCallback) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.options = options;\r\n\t\tthis.type = MenuTypes.SELECTOR;\r\n\t\tthis.currentOption = defaultOption;\r\n\t\tthis.selectCallback = selectCallback;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name + '. Selector. ' + this.options[this.currentOption]);\r\n\t}\r\n\r\n\tincrease() {\r\n\t\tif (this.currentOption < this.options.length - 1) {\r\n\t\t\tthis.currentOption++;\r\n\t\t}\r\n\t\tspeech.speak(this.options[this.currentOption]);\r\n\t\tif (typeof this.selectCallback !== 'undefined') {\r\n\t\t\tthis.selectCallback(this.currentOption);\r\n\t\t}\r\n\t}\r\n\r\n\tdecrease() {\r\n\t\tif (this.currentOption > 0) {\r\n\t\t\tthis.currentOption--;\r\n\t\t}\r\n\t\tspeech.speak(this.options[this.currentOption]);\r\n\t\tif (typeof this.selectCallback !== 'undefined') {\r\n\t\t\tthis.selectCallback(this.currentOption, this.options[this.currentOption]);\r\n\t\t}\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\n\r\nclass SliderItem extends MenuItem {\r\n\tconstructor(id, name, from, to, currentValue = 0, increaseBy = 1) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.minValue = from;\r\n\t\tthis.maxValue = to;\r\n\t\tthis.currentValue = currentValue;\r\n\t\tthis.increaseBy = increaseBy;\r\n\t\tthis.type = MenuTypes.SLIDER;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name + '. Slider. Set to ' + this.currentValue);\r\n\t}\r\n\r\n\tincrease() {\r\n\t\tif (this.currentValue < this.maxValue) {\r\n\t\t\tthis.currentValue += this.increaseBy;\r\n\t\t}\r\n\t\tif (this.currentValue > this.maxValue) this.currentValue = this.maxValue;\r\n\t\tspeech.speak(this.currentValue + \".\");\r\n\t}\r\n\r\n\tdecrease() {\r\n\t\tif (this.currentValue > this.minValue) {\r\n\t\t\tthis.currentValue -= this.increaseBy;\r\n\t\t}\r\n\t\tif (this.currentValue < this.minValue) this.currentValue = this.minValue;\r\n\t\tspeech.speak(this.currentValue + \".\");\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.id;\r\n\t}\r\n}\r\n\r\nclass EditItem extends MenuItem {\r\n\tconstructor(id, name, defaultText = '') {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.text = defaultText;\r\n\t\tthis.type = MenuTypes.EDIT;\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tspeech.speak(this.name + '. Editable. ' + (this.text == '' ? 'Nothing entered.' : 'Set to ' + this.text));\r\n\t}\r\n\r\n\taddChar(char) {\r\n\t\tthis.text += char;\r\n\t\tspeech.speak(char);\r\n\t}\r\n\r\n\tremoveChar() {\r\n\t\tthis.text = this.text.substring(0, this.text.length - 1);\r\n\t\tspeech.speak(this.text);\r\n\t}\r\n\r\n\tselect() {\r\n\t\treturn this.text;\r\n\t}\r\n}\r\nexport { MenuItem, AudioItem, SliderItem, SelectorItem, MenuTypes };\r\n","'use strict';\nimport \"babel-polyfill\";\nimport { utils } from './utilities';\nimport Hammer from 'hammerjs';\nimport { speech } from './tts';\nimport { so } from './soundObject.js';\nimport { MenuTypes, MenuItem } from './menuItem';\nimport { KeyEvent } from './keycodes';\nimport { KeyboardInput } from './input';\n\nclass Menu {\n\tconstructor(name, menuData, music) {\n\t\tthis.kp=event => {\nthis.handleInput(event);\n\t\t\t\t\t};\n\t\tthis.kd=event => {\nthis.handleKeys(event);\n\t\t\t\t\t\t\t};\n\t\tthis.fadeTime = 0.6;\n\t\tthis.menuData = menuData;\n\t\tlet audio = name.split(\" \");\n\t\tif (audio.length < 2) this.isAudio = true;\n\t\tif (audio.length >= 2) this.isAudio = false;\n\t\tthis.silent = false;\n\t\tthis.prependAudio = \"\";\n\t\tthis.first = true;\n\t\tthis.cursor = 0;\n\t\tthis.name = name;\n\t\tlet dir = so.directory;\n\t\tso.directory = \"./sounds/\";\n\t\tthis.sndKeyChar = so.create('ui/keyChar');\n\t\tthis.sndKeyDelete = so.create('ui/keyDelete');\n\t\tthis.sndSliderLeft = so.create('ui/menuSliderLeft');\n\t\tthis.sndSliderRight = so.create('ui/menuSliderRight');\n\t\tthis.sndBoundary = so.create('ui/menuBoundary');\n\t\tthis.sndChoose = so.create('ui/menuChoose');\n\t\tthis.sndMove = so.create('ui/menuMove');\n\t\tthis.sndOpen = so.create('ui/menuOpen');\n\t\tthis.sndSelector = so.create('ui/menuSelector');\n\t\tthis.sndWrap = so.create('ui/menuWrap');\n\t\tso.directory = dir;\n\t\tthis.selectCallback = null;\n\t\tif (typeof music !== 'undefined') {\n\t\t\tthis.music = music;\n\t\t}\n\t\tconst id = document.getElementById('touchArea');\n\t\tthis.hammer = new Hammer(id);\n\t}\n\n\tnextItem() {\n\t\tspeech.stop();\n\t\tif (!this.first) {\n\t\t\tif (this.cursor < this.menuData.length - 1) {\n\t\t\t\tif (!this.silent) this.sndMove.play();\n\t\t\t\tthis.cursor++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!this.silent) this.sndWrap.play();\n\t\t\t\tthis.cursor = 0;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (!this.silent) this.sndMove.play();\n\t\t\tthis.first = false;\n\t\t}\n\t\tif (this.isAudio) {\n\t\t\tthis.sndName.stop();\n\t\t\tfor (let i = 0; i < this.menuData.length; i++) {\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\n\t\t\t}\n\t\t}\n\t\tthis.menuData[this.cursor].speak();\n\t}\n\n\tpreviousItem() {\n\t\tspeech.stop();\n\n\t\tif (this.first) {\n\t\t\tthis.first = false;\n\t\t\tif (!this.silent) this.sndMove.play();\n\t\t}\n\t\tif (this.cursor > 0) {\n\t\t\tif (!this.silent) this.sndMove.play();\n\t\t\tthis.cursor--;\n\t\t}\n\t\telse {\n\t\t\tthis.cursor = this.menuData.length - 1;\n\t\t\tif (!this.silent) this.sndWrap.play();\n\n\t\t}\n\t\tif (this.isAudio) {\n\t\t\tthis.sndName.stop();\n\t\t\tfor (let i in this.menuData) {\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\n\t\t\t}\n\t\t}\n\t\tthis.menuData[this.cursor].speak();\n\t\tif (typeof this.moveCallback !== \"undefined\") {\n\t\t\tthis.moveCallback(this.menuData[this.cursor].id);\n\t\t}\n\t}\n\n\tincrease() {\n\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER || this.menuData[this.cursor].type == MenuTypes.SELECTOR) {\n\t\t\tthis.menuData[this.cursor].increase();\n\t\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER) {\n\t\t\t\tif (!this.silent) this.sndSliderRight.play();\n\t\t\t} else {\n\t\t\t\tif (!this.silent) this.sndSelector.play();\n\t\t\t}\n\t\t}\n\t}\n\n\tdecrease() {\n\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER || this.menuData[this.cursor].type == MenuTypes.SELECTOR) {\n\t\t\tthis.menuData[this.cursor].decrease();\n\t\t\tif (this.menuData[this.cursor].type == MenuTypes.SLIDER) {\n\t\t\t\tif (!this.silent) this.sndSliderLeft.play();\n\t\t\t} else {\n\t\t\t\tif (!this.silent) this.sndSelector.play();\n\t\t\t}\n\t\t}\n\t}\n\n\tinsertCharacter(char) {\n\t\tif (this.menuData[this.cursor].type == MenuTypes.EDIT) {\n\t\t\tthis.menuData[this.cursor].addChar(String.fromCharCode(char));\n\t\t\tif (!this.silent) this.sndKeyChar.play();\n\t\t\treturn;\n\t\t}\n\t\t// Char navigation code\n\t\tfor (let i = this.cursor + 1; i < this.menuData.length; i++) {\n\t\t\tif (this.menuData[i].shortcut == String.fromCharCode(char).toLowerCase()) {\n\t\t\t\tthis.cursor = i;\n\t\t\t\tthis.select();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.menuData[i].name.toLowerCase().substr(0, 1) == String.fromCharCode(char).toLowerCase()) {\n\t\t\t\tthis.cursor = i;\n\t\t\t\tthis.menuData[this.cursor].speak();\n\t\t\t\tthis.first = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\n\t\t\tif (this.menuData[i].shortcut == String.fromCharCode(char).toLowerCase()) {\n\t\t\t\tthis.cursor = i;\n\t\t\t\tthis.select();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.menuData[i].name.toLowerCase().substr(0, 1) == String.fromCharCode(char).toLowerCase()) {\n\t\t\t\tthis.cursor = i;\n\t\t\t\tthis.menuData[this.cursor].speak();\n\t\t\t\tthis.first = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\tremoveCharacter() {\n\t\tif (this.menuData[this.cursor].type == MenuTypes.EDIT) {\n\t\t\tthis.menuData[this.cursor].removeChar();\n\t\t\tif (!this.silent) this.sndKeyDelete.play();\n\t\t}\n\t}\n\n\thandleInput(event) {\n\t\tthis.insertCharacter(event.which);\n\t}\n\n\tdestroySounds() {\n\t\tthis.sndKeyChar.destroy();\n\t\tthis.sndKeyDelete.destroy();\n\t\tthis.sndSliderLeft.destroy();\n\t\tthis.sndSliderRight.destroy();\n\t\tif (this.isAudio) this.sndName.destroy();\n\t\tthis.sndBoundary.destroy();\n\t\tthis.sndChoose.destroy();\n\t\tthis.sndMove.destroy();\n\t\tthis.sndOpen.destroy();\n\t\tthis.sndSelector.destroy();\n\t\tthis.sndWrap.destroy();\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\n\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.destroy();\n\t\t}\n\t\tif (typeof this.music !== 'undefined') {\n\t\t\tthis.music.destroy();\n\t\t}\n\t}\n\n\n\tdestroy() {\ndocument.removeEventListener('keydown',this.kd);\ndocument.removeEventListener('keypress',this.kp);\n\t\tthis.hammer.destroy();\n\t\tsetTimeout(() => {\n\t\t\tthis.destroySounds();\n\t\t}, this.fadeTime * 1000);\n\t}\n\n\thandleKeys(event) {\n\t\tswitch (event.which) {\n\t\t\tcase KeyEvent.DOM_VK_RETURN:\n\t\t\t\tthis.select();\n\t\t\t\tbreak;\n\t\t\tcase KeyEvent.DOM_VK_PAGE_UP:\n\t\t\t\tthis.music.volume += 0.03;\n\t\t\t\tbreak;\n\t\t\tcase KeyEvent.DOM_VK_PAGE_DOWN:\n\t\t\t\tthis.music.volume -= 0.03;\n\t\t\t\tbreak;\n\t\t\tcase KeyEvent.DOM_VK_BACK_SPACE:\n\t\t\t\tthis.removeCharacter();\n\t\t\t\tbreak;\n\n\t\t\tcase KeyEvent.DOM_VK_DOWN:\n\n\t\t\t\tthis.nextItem();\n\t\t\t\tbreak;\n\t\t\tcase KeyEvent.DOM_VK_UP:\n\t\t\t\tthis.previousItem();\n\t\t\t\tbreak;\n\t\t\tcase KeyEvent.DOM_VK_RIGHT:\n\n\t\t\t\tthis.increase();\n\n\t\t\t\tbreak;\n\t\t\tcase KeyEvent.DOM_VK_LEFT:\n\n\t\t\t\tthis.decrease();\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\tasync runSync() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.run((s) => {\n\t\t\t\tresolve(s.selected);\n\t\t\t\tthis.destroy();\n\t\t\t});\n\t\t});\n\t}\n\n\trun(callback) {\n\t\tif (typeof this.music === 'object') {\n\t\t\tthis.music.volume = 0.8;\n\t\t\tthis.music.loop = true;\n\t\t\tthis.music.play();\n\t\t\tspeech.ducker = this.music;\n\t\t} else if (typeof this.music === 'string') {\n\t\t\tthis.music = so.create(this.music, true);\n\t\t\tthis.music.volume = 0.8;\n\t\t\tthis.music.loop = true;\n\t\t\tthis.music.play();\n\t\t\tspeech.ducker = this.music;\n\t\t} else {\n\t\t}\n\t\tthis.selectCallback = callback;\n\t\tconst that = this;\n\t\tdocument.addEventListener('keypress', this.kp);\ndocument.addEventListener('keydown',this.kd);\n\n\t\tthis.hammer.on(\"swipeleft\", function (event) { that.handleSwipe(0); });\n\t\tthis.hammer.on(\"swiperight\", function (event) { that.handleSwipe(1); });\n\t\tthis.hammer.on(\"panup\", function (event) { that.handleSwipe(3); });\n\t\tthis.hammer.on(\"pandown\", function (event) { that.handleSwipe(4); });\n\t\tthis.hammer.on(\"tap\", function (event) { that.handleSwipe(2); });\n\t\tif (this.isAudio) {\n\t\t\tthis.sndName = so.create(this.name);\n\t\t\tthis.sndName.play();\n\t\t}\n\t\telse {\n\t\t\tspeech.speak(this.name);\n\t\t}\n\t\tif (!this.silent) this.sndOpen.play();\n\t}\n\n\thandleSwipe(action) {\n\t\tif (action == 3) {\n\t\t\tthis.decrease();\n\t\t}\n\t\tif (action == 4) {\n\t\t\tthis.increase();\n\t\t}\n\n\t\tif (action == 0) {\n\t\t\tthis.previousItem();\n\t\t}\n\t\tif (action == 1) {\n\t\t\tthis.nextItem();\n\t\t}\n\t\tif (action == 2) {\n\t\t\tthis.select();\n\t\t}\n\t}\n\n\tselect() {\n\t\t//select function\n\t\tconst selected = this.menuData[this.cursor].id;\n\t\tconst items = [];\n\t\tfor (let i = 0; i < this.menuData.length; i++) {\n\t\t\tlet addItem = null;\n\t\t\tif (this.menuData[i].type == MenuTypes.SLIDER) {\n\t\t\t\taddItem = {\n\t\t\t\t\tid: this.menuData[i].id,\n\t\t\t\t\tvalue: this.menuData[i].currentValue,\n\t\t\t\t\t//name: this.menuData[i].options[this.menuData[i].currentValue]\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (this.menuData[i].type == MenuTypes.EDIT) {\n\t\t\t\taddItem = {\n\t\t\t\t\tid: this.menuData[i].id,\n\t\t\t\t\tvalue: this.menuData[i].text\n\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (this.menuData[i].type == MenuTypes.SELECTOR) {\n\t\t\t\taddItem = {\n\t\t\t\t\tid: this.menuData[i].id,\n\t\t\t\t\tvalue: this.menuData[i].currentOption,\n\t\t\t\t\tname: this.menuData[i].options[this.menuData[i].currentOption]\n\t\t\t\t};\n\t\t\t}\n\t\t\titems.push(addItem);\n\t\t}\n\n\t\tconst toReturn = {\n\t\t\tselected,\n\t\t\tcursor: this.cursor,\n\t\t\titems\n\t\t};\n\t\tif (!this.silent) this.sndChoose.play();\n\t\tdocument.removeEventListener('keydown',this.kd);\n\t\tdocument.removeEventListener('keypress',this.kp);\n\t\tif (this.isAudio) {\n\t\t\tthis.sndName.stop();\n\t\t\tfor (let i = 0; i < this.menuData.length; i++) {\n\t\t\t\tif (this.menuData[i].type == MenuTypes.AUDIO) this.menuData[i].snd.stop();\n\t\t\t}\n\t\t}\n\t\tif (!this.silent) this.musicDuration = this.fadeTime * 1000;\n\t\tif (typeof this.music === \"undefined\" || this.silent) this.musicDuration = 0;\n\n\t\tconst that = this;\n\t\tif (typeof this.music !== \"undefined\") {\n\t\t}\n\t\tif (this.silent) this.musicDuration = 0;\n\t\tsetTimeout(() => {\n\t\t\tthat.selectCallback(toReturn);\n\t\t}, this.musicDuration);\n\t}\n}\nexport { Menu };\n","'use strict';\r\n\r\nconst fs = require('fs');\r\n\r\n/**\r\n * @class\r\n */\r\nclass LineByLine {\r\n    constructor(file, options) {\r\n        options = options || {};\r\n\r\n        if (!options.readChunk) options.readChunk = 1024;\r\n\r\n        if (!options.newLineCharacter) {\r\n            options.newLineCharacter = 0x0a; //linux line ending\r\n        } else {\r\n            options.newLineCharacter = options.newLineCharacter.charCodeAt(0);\r\n        }\r\n\r\n        if (typeof file === 'number') {\r\n            this.fd = file;\r\n        } else {\r\n            this.fd = fs.openSync(file, 'r');\r\n        }\r\n\r\n        this.options = options;\r\n\r\n        this.newLineCharacter = options.newLineCharacter;\r\n\r\n        this.reset();\r\n    }\r\n\r\n    _searchInBuffer(buffer, hexNeedle) {\r\n        let found = -1;\r\n\r\n        for (let i = 0; i <= buffer.length; i++) {\r\n            let b_byte = buffer[i];\r\n            if (b_byte === hexNeedle) {\r\n                found = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return found;\r\n    }\r\n\r\n    reset() {\r\n        this.eofReached = false;\r\n        this.linesCache = [];\r\n        this.fdPosition = 0;\r\n    }\r\n\r\n    close() {\r\n        fs.closeSync(this.fd);\r\n        this.fd = null;\r\n    }\r\n\r\n    _extractLines(buffer) {\r\n        let line;\r\n        const lines = [];\r\n        let bufferPosition = 0;\r\n\r\n        let lastNewLineBufferPosition = 0;\r\n        while (true) {\r\n            let bufferPositionValue = buffer[bufferPosition++];\r\n\r\n            if (bufferPositionValue === this.newLineCharacter) {\r\n                line = buffer.slice(lastNewLineBufferPosition, bufferPosition);\r\n                lines.push(line);\r\n                lastNewLineBufferPosition = bufferPosition;\r\n            } else if (!bufferPositionValue) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        let leftovers = buffer.slice(lastNewLineBufferPosition, bufferPosition);\r\n        if (leftovers.length) {\r\n            lines.push(leftovers);\r\n        }\r\n\r\n        return lines;\r\n    };\r\n\r\n    _readChunk(lineLeftovers) {\r\n        let totalBytesRead = 0;\r\n\r\n        let bytesRead;\r\n        const buffers = [];\r\n        do {\r\n            const readBuffer = new Buffer(this.options.readChunk);\r\n\r\n            bytesRead = fs.readSync(this.fd, readBuffer, 0, this.options.readChunk, this.fdPosition);\r\n            totalBytesRead = totalBytesRead + bytesRead;\r\n\r\n            this.fdPosition = this.fdPosition + bytesRead;\r\n\r\n            buffers.push(readBuffer);\r\n        } while (bytesRead && this._searchInBuffer(buffers[buffers.length-1], this.options.newLineCharacter) === -1);\r\n\r\n        let bufferData = Buffer.concat(buffers);\r\n\r\n        if (bytesRead < this.options.readChunk) {\r\n            this.eofReached = true;\r\n            bufferData = bufferData.slice(0, totalBytesRead);\r\n        }\r\n\r\n        if (totalBytesRead) {\r\n            this.linesCache = this._extractLines(bufferData);\r\n\r\n            if (lineLeftovers) {\r\n                this.linesCache[0] = Buffer.concat([lineLeftovers, this.linesCache[0]]);\r\n            }\r\n        }\r\n\r\n        return totalBytesRead;\r\n    }\r\n\r\n    next() {\r\n        if (!this.fd) return false;\r\n\r\n        let line = false;\r\n\r\n        if (this.eofReached && this.linesCache.length === 0) {\r\n            return line;\r\n        }\r\n\r\n        let bytesRead;\r\n\r\n        if (!this.linesCache.length) {\r\n            bytesRead = this._readChunk();\r\n        }\r\n\r\n        if (this.linesCache.length) {\r\n            line = this.linesCache.shift();\r\n\r\n            const lastLineCharacter = line[line.length-1];\r\n\r\n            if (lastLineCharacter !== 0x0a) {\r\n                bytesRead = this._readChunk(line);\r\n\r\n                if (bytesRead) {\r\n                    line = this.linesCache.shift();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.eofReached && this.linesCache.length === 0) {\r\n            this.close();\r\n        }\r\n\r\n        if (line && line[line.length-1] === this.newLineCharacter) {\r\n            line = line.slice(0, line.length-1);\r\n        }\r\n\r\n        return line;\r\n    }\r\n}\r\n\r\nmodule.exports = LineByLine;\r\n","let debugl = \"\";\r\nconst os = require('os');\r\nlet name;\r\nconst fs = require('fs');\r\nimport { OldTimer } from './oldtimer';\r\nlet debug = false;\r\nlet first_iter;\r\nlet tut_count;\r\nlet gotoline = 0;\r\nexport function report(err) {\r\n\tconst prom = new Promise(resolve => {\r\n\t\tfetch(\r\n\t\t\t\"http://oriolgomez.com/report.php?error=\" +\r\n\t\t\tencodeURIComponent(err.name + \": \" + err.message + \"\\n\" + err.stack)\r\n\t\t)\r\n\t\t\t.then(event => event.text())\r\n\t\t\t.then(data => {\r\n\t\t\t\tspeech.speak(\"Error! \" + err.message + \": \" + err.stack);\r\n\t\t\t\tresolve(data);\r\n\t\t\t});\r\n\t});\r\n}\r\nexport function reportString(what) {\r\n\tconst prom = new Promise(resolve => {\r\n\t\tfetch(\r\n\t\t\t\"http://oriolgomez.com/report.php?error=\" +\r\n\t\t\tencodeURIComponent(\"unlocalized rhythm rage string: \" + what)\r\n\t\t)\r\n\t\t\t.then(event => event.text())\r\n\t\t\t.then(data => {\r\n\t\t\t\tspeech.speak(\"Error! \" + err.message + \": \" + err.stack);\r\n\t\t\t\tresolve(data);\r\n\t\t\t});\r\n\t});\r\n}\r\n\r\nlet tut_beep, tut_ap, tut_early, tut_late, tut_great;\r\nlet enhancing;\r\nlet tut_mus;\r\nlet intersounds = [];\r\nlet enhanced = true;\r\nlet tut_right = 0, tut_wrong = 0, tut_start = 0, tut_finish = 0, tut_max = 0;\r\nlet musiconly;\r\nlet keycal = 0;\r\nlet timewindow;\r\nlet actiontimes = [];\r\nlet okval;\r\nlet last;\r\nlet totalactions;\r\nlet strict;\r\nlet cooltime;\r\nexport let cooldown = false;\r\nexport let cooler = new OldTimer();\r\nexport let debugmode;\r\nlet ok_n, super_n;\r\nlet com = \"\";\r\nlet newlevel, oklevel, faillevel, superlevel, perfectlevel;\r\nlet alreadyplayed;\r\nlet lname;\r\nlet ln;\r\nlet lockerror;\r\nlet mp;\r\nlet ok;\r\nlet curlev;\r\nexport let perfect = true;\r\nlet question;\r\nlet olv;\r\nlet tuts;\r\nlet tute, tutes, tuten, tutem;\r\nlet unlockeda;\r\nlet totala;\r\nlet tutorial;\r\nlet keys = [];\r\nlet achievements;\r\nlet jng, failjng, perfectjng;\r\nlet superv, okjng;\r\nlet wait;\r\nlet seek = 0;\r\nexport let aliases = {};\r\nlet presets = {};\r\nlet macrod = {};\r\nlet lasts, lasta, lastsn, lastan, lastak;\r\nlet curline;\r\nlet sounds = [];\r\nlet actions = [];\r\nlet f;\r\nlet mpos;\r\nlet loadp;\r\nlet packing;\r\nlet packnames;\r\nlet packfiles;\r\nlet creatingpack = true;\r\nlet mode;\r\nlet playing;\r\nlet music;\r\nlet lastscore = 0, lastdiff = 0, lastlevel = 0;\r\nlet vos;\r\nexport let pool = new SoundHandler();\r\nexport var lang = 1;\r\nexport let perfectrun, bad, good, held;\r\nimport { Snd, Action, Intersound, preload, lsd, lad, snd, preload_add } from './classes';\r\nexport var ttsVoice;\r\nexport var ttsRate = 1;\r\nlet achs = [\r\n\t\"fw\", \"fl\", \"idle\", \"dl\", \"dw\", \"w1\", \"w5\", \"w10\", \"w25\", \"w50\", \"usepinky\", \"lactions\", \"fingr\", \"bulk\", \"intro\", \"slotwin\", \"frust\", \"catslots\", \"robber\",\r\n];\r\nexport var editing = false;\r\n\r\nlet boot = false;\r\nimport { Player } from './player';\r\nimport { SliderItem, MenuItem } from './menuItem';\r\nimport { Menu } from './menu';\r\nimport walk from 'fs-walk';\r\nimport { ScrollingText } from './scrollingText';\r\nimport { strings } from './strings';\r\nimport { SoundHandler } from './soundHandler';\r\nimport { speech } from './tts';\r\nimport { utils } from './utilities';\r\nimport { so } from './soundObject';\r\nimport { KeyEvent } from './keycodes';\r\nexport var mangle = require(\"base-64\");\r\nimport { KeyboardInput } from './input.js';\r\nexport var langs = ['', 'english', 'spanish'];\r\nexport let pack = 'default';\r\nexport var data = '';\r\nexport var path = os.homedir() + '/rpacks/' + pack + '/';\r\ndocument.addEventListener('DOMContentLoaded', setup);\r\nasync function fade2(sound) {\r\n\tawait new Promise(async (resolve, reject) => {\r\n\t\tawait sound.fade(300)\r\n\t});\r\n}\r\nfunction nopack() {\r\n\tso.directory = \"./sounds/\";\r\n}\r\nfunction yespack() {\r\n\tso.directory = path;\r\n}\r\nasync function setup() {\r\n\tdocument.getElementById(\"app\").focus();\r\n\tlet snd = so.create(\"logo\" + lang);\r\n\tawait snd.playSync();\r\n\tif (!fs.existsSync(os.homedir() + '/rpacks')) {\r\n\t\tfs.mkdirSync(os.homedir() + '/rpacks');\r\n\t}\r\n\tcheckPack();\r\n}\r\nexport function save() {\r\n\tif (!fs.existsSync(os.homedir() + '/rpacks')) {\r\n\t\tfs.mkdirSync(os.homedir() + '/rpacks');\r\n\t}\r\n\tlet write = JSON.stringify(data);\r\n\tfs.writeFileSync(os.homedir() + '/rpacks/save.dat', write);\r\n}\r\nexport async function checkPack(changeBoot = true, debug = false) {\r\n\tperfectjng = \"perfect_jingle\";\r\n\tsuperv = \"super_jingle\";\r\n\tfailjng = \"fail_jingle\";\r\n\tokjng = \"ok_jingle\";\r\n\ttry {\r\n\t\t//data = JSON.parse(mangle.decode(fs.readFileSync(os.homedir() + '/rpacks/save.dat')));\r\n\t\tdata = JSON.parse(fs.readFileSync(os.homedir() + '/rpacks/save.dat'));\r\n\t\tif (typeof data.rate !== 'undefined') {\r\n\t\t\tspeech.rate = data.rate;\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tdata = new Player();\r\n\t\tlet introing = true;\r\n\t\tlet str = \"\";\r\n\t\tfor (let i in strings.strings) {\r\n\t\t\tstr += strings.strings[i].langs + \". \";\r\n\t\t}//for\r\n\r\n\t\tlet items = [];\r\n\t\tlet counter = 1;\r\n\t\tfor (let i in strings.strings) {\r\n\t\t\titems.push(new MenuItem(counter, strings.strings[i].lang));\r\n\t\t\tcounter++;\r\n\t\t}//for\r\n\t\tlet lm = new Menu(str, items);\r\n\t\tlm.run((s) => {\r\n\t\t\tlang = s.selected;\r\n\t\t\tdata.lang = lang;\r\n\t\t\tsave();\r\n\t\t\tlm.destroy();\r\n\t\t});//lang\r\n\t}//catch\r\n\tpack = data.pack;\r\n\tlang = data.lang;\r\n\tif (typeof data.rate !== \"undefined\") speech.rate = data.rate;\r\n\tpath = os.homedir() + '/rpacks/' + pack + '/';\r\n\tsave();\r\n\tif (!fs.existsSync(path)) {\r\n\t\tpack = 'default';\r\n\t\tpath = os.homedir() + '/rpacks/' + pack + '/';\r\n\t}//exists\r\n\tif (!fs.existsSync(path)) {\r\n\t\tawait new ScrollingText(strings.get(\"packError\"));\r\n\t\treturn;\r\n\t}//exists\r\n\r\n\tif (fs.existsSync(path + \"tut_next.ogg\")) {\r\n\t\tyespack();\r\n\t\ttuten = so.create(\"tut_next\");\r\n\t}\r\n\telse {\r\n\t\tnopack();\r\n\t\ttuten = so.create(\"tut_next\");\r\n\t\tyespack();\r\n\t}\r\n\tif (fs.existsSync(path + \"tut_start.ogg\")) {\r\n\t\tyespack();\r\n\t\ttutes = so.create(\"tut_start\");\r\n\t}\r\n\telse {\r\n\t\tnopack();\r\n\t\ttutes = so.create(\"tut_start\");\r\n\t\tyespack();\r\n\t}\r\n\tif (fs.existsSync(path + \"tut_end.ogg\")) {\r\n\t\tyespack();\r\n\t\ttute = so.create(\"tut_end\");\r\n\t}\r\n\telse {\r\n\t\tnopack();\r\n\t\ttute = so.create(\"tut_end\");\r\n\t\tyespack();\r\n\t}\r\n\tnopack();\r\n\ttut_ap = so.create(\"tut_good\");\r\n\ttut_early = so.create(\"tut_early\");\r\n\ttut_late = so.create(\"tut_late\");\r\n\ttut_great = so.create(\"tut_bell\");\r\n\ttut_beep = so.create(\"tut_beep\");\r\n\tyespack();\r\n\tlet stre = \" \" + strings.get(\"fileNotFound\");\r\n\tif (!fs.existsSync(path + perfectjng + \".ogg\")) {\r\n\t\tawait new ScrollingText(perfectjng + stre);\r\n\t}\r\n\tif (!fs.existsSync(path + superv + \".ogg\")) {\r\n\t\tawait new ScrollingText(superv + stre);\r\n\t}\r\n\tif (!fs.existsSync(path + okjng + \".ogg\")) {\r\n\t\tawait new ScrollingText(okjng + stre);\r\n\t}\r\n\tif (!fs.existsSync(path + failjng + \".ogg\")) {\r\n\t\tawait new ScrollingText(failjng + stre);\r\n\t}\r\n\tif (!fs.existsSync(path + \"win_pack.ogg\") && creatingpack) {\r\n\t\tawait new ScrollingText(\"win_pack \" + stre);\r\n\t}\r\n\r\n\tif (fs.existsSync(path + \"logo.ogg\") && !alreadyplayed) {\r\n\t\talreadyplayed = true;\r\n\t\tyespack();\r\n\t\tlet logo = so.create(\"logo\");\r\n\t\tawait logo.playSync();\r\n\t}\r\n\tif (!fs.existsSync(path + \"newach.ogg\") && creatingpack) {\r\n\t\tawait new ScrollingText(\"newach\" + stre);\r\n\t}\r\n\telse {\r\n\t\tachs = so.create(\"newach\");\r\n\t}\r\n\tmainMenu();\r\n}//function\r\nvar download = function (url, dest, cb) {\r\n\tconst http = require('http');\r\n\tvar file = fs.createWriteStream(dest);\r\n\tvar request = http.get(url, function (response) {\r\n\t\tresponse.pipe(file);\r\n\t\tfile.on('finish', function () {\r\n\t\t\tfile.close();\r\n\t\t\tcb();\r\n\t\t});\r\n\t});\r\n}\r\nfunction mainMenu() {\r\n\tnopack();\r\n\tlockerror = so.create(\"lock_error\");\r\n\toklevel = so.create(\"oklevel\");\r\n\tfaillevel = so.create(\"faillevel\");\r\n\tnewlevel = so.create(\"newlevel\");\r\n\tnewlevel.bgtVolume = -2;\r\n\tsuperlevel = so.create(\"superlevel\");\r\n\tperfectlevel = so.create(\"perfectlevel\");\r\n\tyespack();\r\n\tif (com != \"\") {\r\n\t\tstartlev(com);\r\n\t}\r\n\tyespack();\r\n\tmp = -1;\r\n\tso.directory = path;\r\n\tlet items = [];\r\n\titems.push(new MenuItem(\"select\", strings.get(\"levelSelect\")));\r\n\titems.push(new MenuItem(\"change\", strings.get(\"changePack\")));\r\n\titems.push(new MenuItem(\"getpacks\", strings.get(\"downloadPacks\")));\r\n\titems.push(new MenuItem(\"rate\", strings.get(\"changeRate\")));\r\n\r\n\titems.push(new MenuItem(\"ach\", strings.get(\"achievements\")));\r\n\titems.push(new MenuItem(\"achclear\", strings.get(\"deleteAchievements\")));\r\n\tlet menu = new Menu(strings.get(\"mainMenu\"), items);\r\n\tlet music = so.create(\"menu_music\", true)\r\n\tmusic.play();\r\n\tmusic.loop = true;\r\n\tyespack();\r\n\r\n\r\n\tmenu.run(async (s) => {\r\n\t\tawait music.fade(300)\r\n\t\tmenu.destroy();\r\n\t\tmusic.destroy();\r\n\t\tif (s.selected == \"select\") {\r\n\t\t\tstartgame(1);\r\n\t\t}\r\n\t\tif (s.selected == \"rate\") {\r\n\t\t\tchangeRate();\r\n\t\t\treturn;\r\n\t\t}\r\n\t});\r\n}\r\nfunction set_level(level, value) {\r\nif (typeof data[\"unlocks\"]===\"undefined\") data.unlocks={}\r\nif (typeof data[\"unlocks\"][pack]===\"undefined\") data.unlocks[pack]={}\r\nif (typeof data[\"unlocks\"][pack][\"levels\"]===\"undefined\") data.unlocks[pack][\"levels\"]={}\r\n\tdata.unlocks[pack][\"levels\"][level] = value;\r\n\tsave();\r\n}\r\nfunction get_level(level) {\r\nif (typeof data[\"unlocks\"]===\"undefined\") data.unlocks={}\r\nif (typeof data[\"unlocks\"][pack]===\"undefined\") data.unlocks[pack]={}\r\nif (typeof data[\"unlocks\"][pack][\"levels\"]===\"undefined\") data.unlocks[pack][\"levels\"]={}\r\nsave()\r\n\tif (typeof data.unlocks[pack][\"levels\"][level] === \"undefined\") return false;\r\n\treturn data.unlocks[pack][\"levels\"][level];\r\n}\r\n\r\nasync function startgame(md) {\r\n\tperfectrun = false;\r\n\tmusiconly = false;\r\n\tconst lineByLine = require('./readlines.js');\r\n\tquestion = 2;\r\n\tlet levfiles = await utils.findFiles(path, \"lvl\");\r\n\tlast = false;\r\n\tokval = 0;\r\n\tlet levels = 0, locked = 0;\r\n\tlet levname;\r\n\tvar readline = require('readline');\r\n\tvar stream = require('stream');\r\n\tlet lock = strings.get(\"locked\");\r\n\tlet items = [];\r\n\tfor (let i = 0; i < levfiles.length; i++) {\r\n\t\tlevname = levfiles[i].substr(0, levfiles[i].length - 4);\r\n\t\tif (get_level(levname) > 1 || i == 0 || creatingpack) {\r\n\t\t\tlevels++;\r\n\t\t\tlet line=await fs.readFileSync(path+levfiles[i]).split(\"\\n\")[0]\r\n\t\t\tconsole.log(line)\r\n\t\t\t\titems.push(new MenuItem(levname, line.toString('utf8')));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (get_level(levname)) {\r\n\t\t\t\tlevels++;\r\n\t\t\t\tconst liner = new lineByLine(path + levfiles[i]);\r\n\t\t\t\tlet line;\r\n\t\t\t\tlet lineNumber = 0;\r\n\t\t\t\twhile (lineNumber < 1) {\r\n\t\t\t\t\tline = liner.next();\r\n\t\t\t\t\titems.push(new MenuItem(levname, line.toString('utf8')));\r\n\t\t\t\t\tlineNumber++;\r\n\t\t\t\t}\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\titems.push(new MenuItem(\"locked123\", lock));\r\n\t\t\tlocked++;\r\n\t\t}\r\n\t}\r\n\titems.push(new MenuItem(\"esc\", strings.get(\"goBack\")));\r\n\t//strings.get should use %1 && %2\r\n\tlet lmenu = new Menu(strings.get(\"levelMenu\", [levels, locked]), items, so.create(\"select_level_music\"));\r\n\tlmenu.run(async (s) => {\r\n\t\tawait lmenu.music.fade(400);\r\n\t\tlmenu.destroy();\r\n\t\tif (s.selected == \"locked123\") {\r\n\t\t\tnew ScrollingText(strings.get(\"thisLevelLocked\"), \"\\n\", () => {\r\n\t\t\t\tstartgame(1);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (s.selected == \"esc\") {\r\n\t\t\tmainMenu();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (levfiles[levfiles.length - 1] == s.selected) last = true;\r\n\t\t\tstartlev(s.selected);\r\n\t\t}\r\n\t});//menu run\r\n}//function\r\n\r\nasync function startlev(lv) {\r\n\tlet type = 0;\r\n\tactiontimes = [];\r\n\tstrict = false;\r\n\tdebugmode = false;\r\n\tsuper_n = 91;\r\n\tok_n = 70;\r\n\ttimewindow = 150 + keycal;\r\n\tcooltime = 0;\r\n\tunlockeda = 0;\r\n\ttotala = 0;\r\n\ttutorial = false;\r\n\tlet macrostuff = \"\";\r\n\tperfectjng = \"perfect_jingle\";\r\n\tsuperv = \"super_jingle\";\r\n\tfailjng = \"fail_jingle\";\r\n\tokjng = \"ok_jingle\";\r\n\taliases = {};\r\n\tpresets = {};\r\n\t//tutorial\r\n\tlname = lv;\r\n\tolv = lv;\r\n\tlet olv2 = lv;\r\n\tlet items = [];\r\n\tif (fs.existsSync(path + lname + \".tut\") && question != 1) {\r\n\t\titems.push(new MenuItem(\"tut\", strings.get(\"tutorial\")));\r\n\t}\r\n\titems.push(new MenuItem(\"play\", strings.get(\"play\")));\r\n\t//here\r\n\tif (get_level(lname) >= 3) {\r\n\t\titems.push(new MenuItem(\"perfectrun\", strings.get(\"perfectRun\")));\r\n\t}\r\n\telse {\r\n\t\titems.push(new MenuItem(\"esc\", strings.get(\"perfectRunNotAvailable\")));\r\n\t}\r\n\tif (get_level(lname) >= 4) {\r\n\t\titems.push(new MenuItem(\"str\", strings.get(\"listenSoundtrack\")));\r\n\t}\r\n\titems.push(new MenuItem(\"esc\", strings.get(\"cancel\")));\r\n\tlet r;\r\n\tif (com != \"\") { question = 0; }\r\n\tif (com == \"\") {\r\n\t\tlet choice = new Menu(strings.get(\"chooseLevelOption\"), items);\r\n\t\tr = await choice.runSync();\r\n\t\tif (r == \"tut\") question = 1;\r\n\t\tif (r == \"play\") question = 2;\r\n\t\tif (r == \"perfect\") {\r\n\t\t\tquestion = 2;\r\n\t\t\tperfectrun = true;\r\n\t\t}\r\n\t\tif (r == \"str\") {\r\n\t\t\tquestion = 2;\r\n\t\t\tmusiconly = true;\r\n\t\t}\r\n\t\tif (r == \"esc\") {\r\n\t\t\tstartgame(1);;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (r == \"tut\") question = 1;\r\n\t\tif (r == \"play\") question = 2;\r\n\t}\r\n\tif (question == 1) {\r\n\t\tlv = lname + \".tut\";\r\n\t\ttutorial = true;\r\n\t}\r\n\tif (question == 2) {\r\n\t\tlv = lname + \".lvl\";\r\n\t\ttutorial = false;\r\n\t}\r\n\tif (tutorial) {\r\n\t}\r\n\tjng = olv2 + \"j\";\r\n\tactions = [];\r\n\tsounds = [];\r\n\twait = 0;\r\n\tseek = 0;\r\n\tlet lev_vol = 0;\r\n\tlet f = fs.readFileSync(path + lv, \"utf8\");\r\n\tlet the_string = f;\r\n\tlet input = new KeyboardInput();\r\n\tinput.init();\r\n\twait = 0;\r\n\tfor (let i = 1; i < 3; i++) {\r\n\t\tif (tutorial) {\r\n\t\t\tlet lines = the_string.split(\"\\r\\n\");\r\n\t\t\tawait tutes.playSync();\r\n\t\t\tgotoline = 0;\r\n\t\t\tfor (let i = gotoline; i < lines.length; i++) {\r\n\t\t\t\tif (lines[i] == \"jump\") {\r\n\t\t\t\t\tgotoline = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let i = gotoline; i < lines.length; i++) {\r\n\t\t\t\tlet w = lines[i].split(\" \");\r\n\t\t\t\tfor (let i = 0; i < w.length; i++) {\r\n\t\t\t\t\tif (w[0] == \"play\") await preload(w[1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (the_string == \"\") {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tlet lines = the_string.split(\"\\r\\n\");\r\n\t\tfor (let i = gotoline; i < lines.length; i++) {\r\n\t\t\tlet ach = \"\";\r\n\t\t\tif (tutorial) {\r\n\t\t\t\tif (input.isJustPressed(KeyEvent.DOM_VK_Q)) break;\r\n\t\t\t}\r\n\t\t\tlet achie = \"\";\r\n\t\t\tlet words = lines[i].split(\" \");\r\n\t\t\tcurline = i + 1;\r\n\t\t\tlet result = lines[i].search(\"ach=\");\r\n\t\t\tif (result != -1) {\r\n\t\t\t\tach = lines[i].substr(result + 4);\r\n\t\t\t}\r\n\t\t\t//newcoms\r\n\t\t\tif (words[0] == \"play\" && tutorial) {\r\n\t\t\t\tif (words.length == 2) {\r\n\t\t\t\t\tpool.playStatic(words[1], 0);\r\n\t\t\t\t}\r\n\t\t\t\telse if (words.length == 3) {\r\n\t\t\t\t\tif (!tutem.playing) {\r\n\t\t\t\t\t\tawait new ScrollingText(\"You have a bad play command on line \" + curline + \". The music isn't playing || sound could not be found.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (tutem.position >= Number(words[2])) {\r\n\t\t\t\t\t\tpool.playStatic(words[1], false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"stopsounds\") {\r\n\t\t\t\tpool.destroy();\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"wait\" && tutorial) {\r\n\t\t\t\tawait utils.sleep(Number(words[1]));\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"interactive\" && tutorial) {\r\n\t\t\t\tlet params = words;\r\n\t\t\t\tif (params.length > 2) {\r\n\t\t\t\t\ttut_right = 0;\r\n\t\t\t\t\ttut_count = 0;\r\n\t\t\t\t\ttut_wrong = 0;\r\n\t\t\t\t\tenhanced = true;\r\n\t\t\t\t\ttut_mus = so.create(params[1]);\r\n\t\t\t\t\ttut_mus.bgtVolume = Number(params[2]);\r\n\t\t\t\t\ttut_start = Number(params[3]);\r\n\t\t\t\t\ttut_finish = Number(params[4]);\r\n\t\t\t\t\tintersounds = [];\r\n\t\t\t\t\ttut_max = Number(params[5]);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tenhanced = false;\r\n\t\t\t\t\t//icode\r\n\t\t\t\t\tfirst_iter = true;\r\n\t\t\t\t\ttut_mus.play();\r\n\t\t\t\t\ttut_mus.seek(tut_start);\r\n\t\t\t\t\tlet go = true;\r\n\t\t\t\t\tlet first_iter_count = -1;\r\n\t\t\t\t\twhile (go) {\r\n\t\t\t\t\t\tawait utils.sleep(5);\r\n\t\t\t\t\t\tif (input.isJustPressed(KeyEvent.DOM_VK_Q)) {\r\n\t\t\t\t\t\t\ttut_mus.stop();\r\n\t\t\t\t\t\t\tstartgame(1);\r\n\t\t\t\t\t\t\treturn go = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (input.isJustPressed(KeyEvent.DOM_VK_Z)) {\r\n\t\t\t\t\t\t\tspeech.speak(tut_count);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (tut_count < intersounds.length) {\r\n\t\t\t\t\t\t\tif (tut_mus.position >= intersounds[tut_count].time && (intersounds[tut_count].key == 0 || first_iter == true)) {\r\n\t\t\t\t\t\t\t\tif (intersounds[tut_count].key == 0) {\r\n\t\t\t\t\t\t\t\t\tintersounds[tut_count].snd.stop();\r\n\t\t\t\t\t\t\t\t\tintersounds[tut_count].snd.play();\r\n\t\t\t\t\t\t\t\t\ttut_count++;\r\n\t\t\t\t\t\t\t\t}//key 0\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tif (first_iter_count < tut_count) tut_beep.play();\r\n\t\t\t\t\t\t\t\t\tfirst_iter_count = tut_count;\r\n\t\t\t\t\t\t\t\t}//key 1 while first iter\r\n\t\t\t\t\t\t\t}//music position\r\n\t\t\t\t\t\t}//first iter shitt\r\n\t\t\t\t\t\tif (tut_count < intersounds.length) {\r\n\t\t\t\t\t\t\tif (input.isJustReleased(intersounds[tut_count].key) && intersounds[tut_count].held && !first_iter) {\r\n\t\t\t\t\t\t\t\tif (tut_mus.position < intersounds[tut_count].end - 75) {\r\n\t\t\t\t\t\t\t\t\ttut_right -= 2;\r\n\t\t\t\t\t\t\t\t\tintersounds[tut_count].snd.stop();\r\n\t\t\t\t\t\t\t\t\t//change\r\n\t\t\t\t\t\t\t\t\ttut_early.stop();\r\n\t\t\t\t\t\t\t\t\ttut_early.play();\r\n\t\t\t\t\t\t\t\t\ttut_count++;\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}//the position\r\n\t\t\t\t\t\t\t\telse {//early\r\n\t\t\t\t\t\t\t\t\tintersounds[tut_count].snd.stop();\r\n\t\t\t\t\t\t\t\t\t//change\r\n\t\t\t\t\t\t\t\t\ttut_great.stop();\r\n\t\t\t\t\t\t\t\t\ttut_great.play();\r\n\t\t\t\t\t\t\t\t\ttut_count++;\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}//great\r\n\t\t\t\t\t\t\t}//the length\r\n\t\t\t\t\t\t\t//held isolated\r\n\t\t\t\t\t\t\t//ok keyboard stuff\r\n\t\t\t\t\t\t\tif (intersounds[tut_count].key > 0) {\r\n\t\t\t\t\t\t\t\tif (input.isJustPressed(intersounds[tut_count].key) && !first_iter) {\r\n\t\t\t\t\t\t\t\t\tif (tut_mus.position >= intersounds[tut_count].time + 75) {\r\n\t\t\t\t\t\t\t\t\t\t//change\r\n\t\t\t\t\t\t\t\t\t\ttut_late.stop();\r\n\t\t\t\t\t\t\t\t\t\ttut_late.play();\r\n\t\t\t\t\t\t\t\t\t\ttut_right--;\r\n\t\t\t\t\t\t\t\t\t\ttut_count++;\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}//too late\r\n\t\t\t\t\t\t\t\t\telse if (tut_mus.position <= intersounds[tut_count].time - 75) {\r\n\t\t\t\t\t\t\t\t\t\t//change\r\n\t\t\t\t\t\t\t\t\t\ttut_early.stop();\r\n\t\t\t\t\t\t\t\t\t\ttut_early.play();\r\n\t\t\t\t\t\t\t\t\t\ttut_right--;\r\n\t\t\t\t\t\t\t\t\t\ttut_count++;\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}//early\r\n\t\t\t\t\t\t\t\t\telse if (tut_mus.position <= intersounds[tut_count].time - 151) {\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t//change\r\n\t\t\t\t\t\t\t\t\t\tintersounds[tut_count].snd.play();\r\n\t\t\t\t\t\t\t\t\t\tintersounds[tut_count].held = true;\r\n\t\t\t\t\t\t\t\t\t\tif (intersounds[tut_count].end == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\ttut_count++;\r\n\t\t\t\t\t\t\t\t\t\t\ttut_great.stop();\r\n\t\t\t\t\t\t\t\t\t\t\ttut_great.play();\r\n\t\t\t\t\t\t\t\t\t\t}//not held\r\n\t\t\t\t\t\t\t\t\t\ttut_right++;\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}//held\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//keyboard isolated\r\n\t\t\t\t\t\t\tif (tut_count == intersounds.length) tut_count = 0;\r\n\t\t\t\t\t\t\tif (intersounds[tut_count].key > 0) {\r\n\t\t\t\t\t\t\t\tif (intersounds[tut_count].end > 0) {\r\n\t\t\t\t\t\t\t\t\tif (input.isDown(intersounds[tut_count].key) && tut_mus.position >= intersounds[tut_count].end + 100 + keycal && !first_iter) {\r\n\t\t\t\t\t\t\t\t\t\t//change\r\n\t\t\t\t\t\t\t\t\t\ttut_late.stop();\r\n\t\t\t\t\t\t\t\t\t\ttut_late.play();\r\n\t\t\t\t\t\t\t\t\t\tintersounds[tut_count].snd.stop();\r\n\t\t\t\t\t\t\t\t\t\ttut_right--;\r\n\t\t\t\t\t\t\t\t\t\ttut_right--;\r\n\t\t\t\t\t\t\t\t\t\ttut_count++;\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (tut_mus.position >= intersounds[tut_count].time + 150 + keycal) {\r\n\t\t\t\t\t\t\t\t\tif (intersounds[tut_count].end == 0 || (intersounds[tut_count].end > 0 && intersounds[tut_count].held == false)) {\r\n\t\t\t\t\t\t\t\t\t\t//change\r\n\t\t\t\t\t\t\t\t\t\tif (!first_iter) {\r\n\t\t\t\t\t\t\t\t\t\t\ttut_late.stop();\r\n\t\t\t\t\t\t\t\t\t\t\ttut_late.play();\r\n\t\t\t\t\t\t\t\t\t\t\ttut_right--;\r\n\t\t\t\t\t\t\t\t\t\t\ttut_count++;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse if (first_iter) {\r\n\t\t\t\t\t\t\t\t\t\t\ttut_count++;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (tut_mus.position >= tut_finish) {\r\n\t\t\t\t\t\t\tfor (let i = 0; i < intersounds.length; i++) {\r\n\t\t\t\t\t\t\t\tintersounds[i].held = false;\r\n\t\t\t\t\t\t\t\tintersounds[i].snd.stop();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (tut_right < tut_max) {\r\n\t\t\t\t\t\t\t\ttut_mus.seek(tut_start);\r\n\t\t\t\t\t\t\t\tfirst_iter = false;\r\n\t\t\t\t\t\t\t\ttut_count = 0;\r\n\t\t\t\t\t\t\t\tif (tut_right < 0) tut_right = 0;\r\n\t\t\t\t\t\t\t}//position\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t//change\r\n\t\t\t\t\t\t\t\ttut_ap.play();\r\n\t\t\t\t\t\t\t\tawait fade2(tut_mus);\r\n\t\t\t\t\t\t\t\tgo = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"intersound\" && enhanced == true) {\r\n\t\t\t\tlet params = words;\r\n\t\t\t\tawait preload(params[1]);\r\n\t\t\t\tlet temp = new Intersound();\r\n\t\t\t\ttemp.snd = so.create(params[1]);\r\n\t\t\t\ttemp.snd.pitch = Number(params[2]);\r\n\t\t\t\ttemp.snd.pan = Number(params[3]);\r\n\t\t\t\ttemp.time = Number(params[4]);\r\n\t\t\t\ttemp.key = 0;\r\n\t\t\t\tif (params.length >= 6) {\r\n\t\t\t\t\t//keys\r\n\t\t\t\t\tlet what = params[5].split(\"_\");\r\n\t\t\t\t\tif (what[0] == \"key\") {\r\n\t\t\t\t\t\tif (what[1] == \"enter\") {\r\n\t\t\t\t\t\t\ttemp.key = KeyEvent.DOM_VK_RETURN;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"space\") {\r\n\t\t\t\t\t\t\ttemp.key = KeyEvent.DOM_VK_SPACE;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"up\") {\r\n\t\t\t\t\t\t\ttemp.key = KeyEvent.DOM_VK_UP;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"down\") {\r\n\t\t\t\t\t\t\ttemp.key = KeyEvent.DOM_VK_DOWN;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"right\") {\r\n\t\t\t\t\t\t\ttemp.key = KeyEvent.DOM_VK_RIGHT;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"left\") {\r\n\t\t\t\t\t\t\ttemp.key = KeyEvent.DOM_VK_LEFT;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"a\") {\r\n\t\t\t\t\t\t\ttemp.key = KeyEvent.DOM_VK_A;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"b\") {\r\n\t\t\t\t\t\t\ttemp.key = KeyEvent.DOM_VK_B;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"c\") {\r\n\t\t\t\t\t\t\ttemp.key = KeyEvent.DOM_VK_C;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"d\") temp.key = KeyEvent.DOM_VK_D;\r\n\t\t\t\t\t\telse if (what[1] == \"e\") temp.key = KeyEvent.DOM_VK_E;\r\n\t\t\t\t\t\telse if (what[1] == \"f\") temp.key = KeyEvent.DOM_VK_F;\r\n\t\t\t\t\t\telse if (what[1] == \"g\") temp.key = KeyEvent.DOM_VK_G;\r\n\t\t\t\t\t\telse if (what[1] == \"h\") temp.key = KeyEvent.DOM_VK_H;\r\n\t\t\t\t\t\telse if (what[1] == \"i\") temp.key = KeyEvent.DOM_VK_I;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"j\") temp.key = KeyEvent.DOM_VK_J;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"k\") temp.key = KeyEvent.DOM_VK_K;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"l\") temp.key = KeyEvent.DOM_VK_L;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"m\") temp.key = KeyEvent.DOM_VK_M;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"n\") temp.key = KeyEvent.DOM_VK_N;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"o\") temp.key = KeyEvent.DOM_VK_O;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"p\") temp.key = KeyEvent.DOM_VK_P;\r\n\t\t\t\t\t\telse if (what[1] == \"q\") temp.key = KeyEvent.DOM_VK_Q;\r\n\t\t\t\t\t\telse if (what[1] == \"r\") temp.key = KeyEvent.DOM_VK_R;\r\n\t\t\t\t\t\telse if (what[1] == \"s\") temp.key = KeyEvent.DOM_VK_S;\r\n\t\t\t\t\t\telse if (what[1] == \"t\") temp.key = KeyEvent.DOM_VK_T;\r\n\t\t\t\t\t\telse if (what[1] == \"u\") temp.key = KeyEvent.DOM_VK_U;\r\n\t\t\t\t\t\telse if (what[1] == \"v\") temp.key = KeyEvent.DOM_VK_V;\r\n\t\t\t\t\t\telse if (what[1] == \"w\") temp.key = KeyEvent.DOM_VK_W;\r\n\t\t\t\t\t\telse if (what[1] == \"x\") temp.key = KeyEvent.DOM_VK_X;\r\n\t\t\t\t\t\telse if (what[1] == \"y\") temp.key = KeyEvent.DOM_VK_Y;\r\n\t\t\t\t\t\telse if (what[1] == \"z\") temp.key = KeyEvent.DOM_VK_Z;\r\n\t\t\t\t\t\telse if (what[1] == \"1\") temp.key = KeyEvent.DOM_VK_1;\r\n\t\t\t\t\t\telse if (what[1] == \"2\") temp.key = KeyEvent.DOM_VK_2;\r\n\t\t\t\t\t\telse if (what[1] == \"3\") temp.key = KeyEvent.DOM_VK_3;\r\n\t\t\t\t\t\telse if (what[1] == \"4\") temp.key = KeyEvent.DOM_VK_4;\r\n\t\t\t\t\t\telse if (what[1] == \"5\") temp.key = KeyEvent.DOM_VK_5;\r\n\t\t\t\t\t\telse if (what[1] == \"6\") temp.key = KeyEvent.DOM_VK_6;\r\n\t\t\t\t\t\telse if (what[1] == \"7\") temp.key = KeyEvent.DOM_VK_7;\r\n\t\t\t\t\t\telse if (what[1] == \"8\") temp.key = KeyEvent.DOM_VK_8;\r\n\t\t\t\t\t\telse if (what[1] == \"9\") temp.key = KeyEvent.DOM_VK_9;\r\n\t\t\t\t\t\telse if (what[1] == \"0\") temp.key = KeyEvent.DOM_VK_0;\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"key not recognized\" + what[1] + \", for action on line \" + curline + \". For more info read parser commands.txt.\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//end keys\r\n\t\t\t\t}\r\n\t\t\t\tif (params.length >= 7) {\r\n\t\t\t\t\ttemp.end = Number(params[6]);\r\n\t\t\t\t}\r\n\t\t\t\tintersounds.push(temp);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"playwait\" && tutorial) {\r\n\t\t\t\tlet snd = so.create(words[1]);\r\n\t\t\t\tawait snd.playSync();\r\n\t\t\t}\r\n\t\t\tif (words[0] == \"text\" && tutorial) {\r\n\t\t\t\tlet text = \"\";\r\n\t\t\t\tfor (let i = 1; i < words.length; i++) {\r\n\t\t\t\t\ttext += words[i] + \" \";\r\n\t\t\t\t}\r\n\t\t\t\tawait new ScrollingText(text);\r\n\t\t\t\ttuten.stop();\r\n\t\t\t\ttuten.play();\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"misc\" && !tutorial) {\r\n\t\t\t\tfor (let i = 1; i < words.length; i++) {\r\n\t\t\t\t\tlet what = words[i].split(\"=\");\r\n\t\t\t\t\tif (what[0] == \"super\") {\r\n\t\t\t\t\t\tsuper_n = Number(what[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"cooldown\") {\r\n\t\t\t\t\t\tcooltime = Number(what[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"reaction\") {\r\n\t\t\t\t\t\ttimewindow = Number(what[1]) + keycal;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"ok\") {\r\n\t\t\t\t\t\tok_n = Number(what[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"action\" && !tutorial) {\r\n\t\t\t\tlet pan = 0;\r\n\t\t\t\ttype = 1;\r\n\t\t\t\tlet endsnd;\r\n\t\t\t\tlet pitch = 100;\r\n\t\t\t\tlet alias;\r\n\t\t\t\tlet time = 0;\r\n\t\t\t\tlet volume = 0;\r\n\t\t\t\tlet failsound = \"fail_generic\";\r\n\t\t\t\tlet etime = 0;\r\n\t\t\t\tlet bksound = \"fail_generic\";\r\n\t\t\t\tlet key = 0;\r\n\t\t\t\tlet earlysound = \"fail_generic\";\r\n\t\t\t\tlet efailsound = \"fail_generic\";\r\n\t\t\t\tlet kp = false;\r\n\t\t\t\tlet latesound = \"fail_generic\";\r\n\t\t\t\tfor (let i = 1; i < words.length; i++) {\r\n\t\t\t\t\tlet what = words[i].split(\"=\");\r\n\t\t\t\t\tif (what[0] == \"time\") {\r\n\t\t\t\t\t\ttime = Number(what[1]);\r\n\t\t\t\t\t\tif (time == 0) {\r\n\t\t\t\t\t\t\tawait new scrollingText(\"time cannot be 0. Line \" + curline + \": \" + lines[curline]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"end\" && !tutorial) {\r\n\t\t\t\t\t\ttype = 2;\r\n\t\t\t\t\t\tetime = Number(what[1]);\r\n\t\t\t\t\t\tif (etime == 0) {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"end time cannot be 0. Line \" + curline);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"ends\" && !tutorial) {\r\n\t\t\t\t\t\ttype = 2;\r\n\t\t\t\t\t\tendsnd = what[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"volume\" && !tutorial) {\r\n\t\t\t\t\t\tvolume = Number(what[1]);\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"pan\" && !tutorial) {\r\n\t\t\t\t\t\tpan = Number(what[1]);\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"pitch\" && !tutorial) {\r\n\t\t\t\t\t\tpitch = Number(what[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"name\") {\r\n\t\t\t\t\t\tname = what[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"alias\") {\r\n\t\t\t\t\t\talias = what[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"key\") {\r\n\t\t\t\t\t\tif (what[1] == \"enter\") {\r\n\t\t\t\t\t\t\tkey = KeyEvent.DOM_VK_RETURN;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"space\") {\r\n\t\t\t\t\t\t\tkey = KeyEvent.DOM_VK_SPACE;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"up\") {\r\n\t\t\t\t\t\t\tkey = KeyEvent.DOM_VK_UP;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"down\") {\r\n\t\t\t\t\t\t\tkey = KeyEvent.DOM_VK_DOWN;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"right\") {\r\n\t\t\t\t\t\t\tkey = KeyEvent.DOM_VK_RIGHT;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"left\") {\r\n\t\t\t\t\t\t\tkey = KeyEvent.DOM_VK_LEFT;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"a\") {\r\n\t\t\t\t\t\t\tkey = KeyEvent.DOM_VK_A;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"b\") {\r\n\t\t\t\t\t\t\tkey = KeyEvent.DOM_VK_B;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"c\") {\r\n\t\t\t\t\t\t\tkey = KeyEvent.DOM_VK_C;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (what[1] == \"d\") key = KeyEvent.DOM_VK_D;\r\n\t\t\t\t\t\telse if (what[1] == \"e\") key = KeyEvent.DOM_VK_E;\r\n\t\t\t\t\t\telse if (what[1] == \"f\") key = KeyEvent.DOM_VK_F;\r\n\t\t\t\t\t\telse if (what[1] == \"g\") key = KeyEvent.DOM_VK_G;\r\n\t\t\t\t\t\telse if (what[1] == \"h\") key = KeyEvent.DOM_VK_H;\r\n\t\t\t\t\t\telse if (what[1] == \"i\") key = KeyEvent.DOM_VK_I;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"j\") key = KeyEvent.DOM_VK_J;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"k\") key = KeyEvent.DOM_VK_K;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"l\") key = KeyEvent.DOM_VK_L;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"m\") key = KeyEvent.DOM_VK_M;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"n\") key = KeyEvent.DOM_VK_N;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"o\") key = KeyEvent.DOM_VK_O;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"p\") key = KeyEvent.DOM_VK_P;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"q\") key = KeyEvent.DOM_VK_Q;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"r\") key = KeyEvent.DOM_VK_R;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"s\") key = KeyEvent.DOM_VK_S;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"t\") key = KeyEvent.DOM_VK_T;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"u\") key = KeyEvent.DOM_VK_U;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"v\") key = KeyEvent.DOM_VK_V;\r\n\t\t\t\t\t\telse if (what[1] == \"w\") key = KeyEvent.DOM_VK_W;\r\n\t\t\t\t\t\telse if (what[1] == \"x\") key = KeyEvent.DOM_VK_X;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"y\") key = KeyEvent.DOM_VK_Y;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"z\") key = KeyEvent.DOM_VK_Z;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"1\") key = KeyEvent.DOM_VK_1;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"2\") key = KeyEvent.DOM_VK_2;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"3\") key = KeyEvent.DOM_VK_3;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"4\") key = KeyEvent.DOM_VK_4;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"5\") key = KeyEvent.DOM_VK_5;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"6\") key = KeyEvent.DOM_VK_6;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"7\") key = KeyEvent.DOM_VK_7;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"8\") key = KeyEvent.DOM_VK_8;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"9\") key = KeyEvent.DOM_VK_9;\r\n\r\n\t\t\t\t\t\telse if (what[1] == \"0\") key = KeyEvent.DOM_VK_0;\r\n\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"key not recognized\" + what[1] + \", for action on line \" + curline + \". You can use space, enter, right, left, up || down, for now. For more info read parser commands.txt.\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"kp\") {\r\n\t\t\t\t\t\tkp = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"fail\") {\r\n\t\t\t\t\t\tfailsound = what[1];\r\n\t\t\t\t\t\tif (!fs.existsSync(path + failsound + \".ogg\")) {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"fail sound doesn't exist. \" + failsound + \", on line \" + curline);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"efail\") {\r\n\t\t\t\t\t\tefailsound = what[1];\r\n\t\t\t\t\t\ttype = 2;\r\n\t\t\t\t\t\tif (!fs.existsSync(path + efailsound + \".ogg\")) {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"end fail sound for tap && hold action doesn't exist. \" + efailsound + \", on line \" + curline);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"miss\") {\r\n\t\t\t\t\t\tbksound = what[1];\r\n\t\t\t\t\t\tif (!fs.existsSync(path + bksound + \".ogg\")) {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"miss sound doesn't exist. \" + bksound + \", on line \" + curline);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"early\") {\r\n\t\t\t\t\t\tearlysound = what[1];\r\n\t\t\t\t\t\tif (!fs.existsSync(path + earlysound + \".ogg\")) {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"early sound doesn't exist. \" + earlysound + \", on line \" + curline);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"late\") {\r\n\t\t\t\t\t\tlatesound = what[1];\r\n\t\t\t\t\t\tif (!fs.existsSync(path + latesound + \".ogg\")) {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"late sound doesn't exist. \" + latesound + \", on line \" + curline);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"ach\") {\r\n\t\t\t\t\t\ttotala++;\r\n\t\t\t\t\t\tif (data.achievements.hasOwnProperty(ach)) {\r\n\t\t\t\t\t\t\tunlockeda++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//await new ScrollingText(\"You have an unknown parameter on line \"+curline+\": \"+what[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}//play for\r\n\t\t\t\t//fail sounds\r\n\t\t\t\tif (efailsound == \"fail_generic\" && failsound != \"fail_generic\")\r\n\t\t\t\t\tefailsound = failsound;\r\n\t\t\t\tif (earlysound == \"fail_generic\" && failsound != \"fail_generic\")\r\n\t\t\t\t\tearlysound = failsound;\r\n\t\t\t\tif (bksound == \"fail_generic\" && failsound != \"fail_generic\")\r\n\t\t\t\t\tbksound = failsound;\r\n\t\t\t\tif (latesound == \"fail_generic\" && failsound != \"fail_generic\")\r\n\t\t\t\t\tlatesound = failsound;\r\n\t\t\t\tif (alias != \"\") {\r\n\t\t\t\t\tif (!presets.hasOwnProperty(alias))\r\n\t\t\t\t\t\tpresets[alias] = lines[curline - 1];\r\n\t\t\t\t}\r\n\t\t\t\tif (type == 2 && (endsnd == \"\" || etime == 0)) {\r\n\t\t\t\t\tawait new ScrollingText(\"Your tap && hold action on line \" + curline + \" isn't correct.\");\r\n\t\t\t\t}\r\n\t\t\t\tif (time == 0) {\r\n\t\t\t\t\tawait new ScrollingText(\"Error in command: play (sound has no time position) on line \" + curline);\r\n\t\t\t\t}\r\n\t\t\t\tif (name == \"\") {\r\n\t\t\t\t\tawait new ScrollingText(\"Error in command: play (sound has no defined name) on line \" + curline);\r\n\t\t\t\t}\r\n\t\t\t\tif (key == 0) {\r\n\t\t\t\t\tawait new ScrollingText(\"The action on line \" + curline + \" has no key.\");\r\n\t\t\t\t}\r\n\t\t\t\tlet temp = new Action(name, pan, pitch, volume, time, failsound, earlysound, latesound, key, alias, bksound, ach, type, etime, endsnd, efailsound, kp);\r\n\t\t\t\tlet overlap = false;\r\n\t\t\t\tfor (let i = 0; i < actiontimes.length; i++) {\r\n\t\t\t\t\tif (actiontimes[i] == temp.duration || actiontimes[i] == temp.end) {\r\n\t\t\t\t\t\toverlap = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (overlap) {\r\n\t\t\t\t\tawait new ScrollingText(\"warning! You have 2 overlapping actions, last one is on line \" + curline + \". This means that one of them is bound to fail. Please fix this.\");\r\n\t\t\t\t}\r\n\t\t\t\tif (temp.duration != 0) actiontimes.push(temp.duration);\r\n\t\t\t\tif (temp.end != 0) actiontimes.push(temp.end);\r\n\t\t\t\tactions.push(temp);\r\n\t\t\t}//action word\r\n\t\t\telse if (words[0] == \"seek\" && tutorial) {\r\n\t\t\t\tif (words.length != 2 || Number(words[2]) > tutem.length) {\r\n\t\t\t\t\tawait new ScrollingText(\"bad seek at line \" + curline + \".\");\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\ttutem.seek(Number(words[1]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"debug\" && !tutorial) {\r\n\t\t\t\tfor (let i = 1; i < words.length; i++) {\r\n\t\t\t\t\tlet what = words[i].split(\"=\");\r\n\t\t\t\t\tif (what[0] == \"seek\") {\r\n\t\t\t\t\t\tseek = Number(what[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"mode\") {\r\n\t\t\t\t\t\tdebugmode = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"play\" && !tutorial) {\r\n\t\t\t\tlet pan = 0;\r\n\t\t\t\tlet pitch = 100;\r\n\t\t\t\tlet time = 0;\r\n\t\t\t\tlet volume = 0;\r\n\t\t\t\tlet alias;\r\n\t\t\t\tlet freq;\r\n\t\t\t\tlet preset;\r\n\t\t\t\tfor (let i = 1; i < words.length; i++) {\r\n\t\t\t\t\tlet what = words[i].split(\"=\");\r\n\t\t\t\t\tif (what[0] == \"time\") {\r\n\t\t\t\t\t\ttime = Number(what[1]);\r\n\t\t\t\t\t\tif (time == 0) {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"time cannot be 0. Line \" + curline + \": \" + lines[curline]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}//time\r\n\t\t\t\t\telse if (what[0] == \"ach\") {\r\n\t\t\t\t\t\ttotala++;\r\n\t\t\t\t\t\tif (data.achievements.hasOwnProperty(ach)) {\r\n\t\t\t\t\t\t\tunlockeda++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"volume\") {\r\n\t\t\t\t\t\tvolume = Number(what[1]);\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"pan\") {\r\n\t\t\t\t\t\tpan = Number(what[1]);\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"pitch\") {\r\n\t\t\t\t\t\tpitch = Number(what[1]);\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"name\") {\r\n\t\t\t\t\t\tname = what[1];\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"fail\") {\r\n\t\t\t\t\t\tfreq = what[1];\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"alias\") {\r\n\t\t\t\t\t\tpreset = what[1];\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"require\") {\r\n\t\t\t\t\t\talias = what[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"ach\") {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}//play for\r\n\t\t\t\tif (preset != \"\") {\r\n\t\t\t\t\tif (!presets.hasOwnProperty(preset))\r\n\t\t\t\t\t\tpresets[preset] = lines[curline - 1];\r\n\t\t\t\t}\r\n\t\t\t\tif (time == 0) {\r\n\t\t\t\t\tawait new ScrollingText(\"Error in: play (sound has no time position) on line \" + curline);\r\n\t\t\t\t}\r\n\t\t\t\tif (name == \"\") {\r\n\t\t\t\t\tawait new ScrollingText(\"Error in command: play (sound has no defined name) on line \" + curline);\r\n\t\t\t\t}\r\n\t\t\t\tif (alias != \"\") {\r\n\t\t\t\t}\r\n\t\t\t\tlet temp = new Snd(name, pan, pitch, volume, time, alias, ach);\r\n\t\t\t\ttemp.failreq = freq;\r\n\t\t\t\tsounds.push(temp);\r\n\t\t\t}//play word\r\n\t\t\telse if (words[0] == \"music\" && tutorial) {\r\n\t\t\t\ttutem = so.create(words[1]);\r\n\t\t\t\tif (words.length >= 3) tutem.bgtVolume = Number(words[2]);\r\n\t\t\t\tif (words.length >= 4) tutem.seek(Number(words[3]));\r\n\t\t\t\ttutem.play();\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"say\" && tutorial) {\r\n\t\t\t\tlet text = \"\";\r\n\t\t\t\tif (words.length == 1) {\r\n\t\t\t\t\tawait new ScrollingText(\"no say text\", \"line \" + curline + \" has no tutorial say text.\");\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 1; i < words.length; i++) {\r\n\t\t\t\t\ttext += words[i] + \" \";\r\n\t\t\t\t}\r\n\t\t\t\tspeech.speak(text);\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"fade\" && tutorial) {\r\n\t\t\t\tif (tutem.playing) await fade2(tutem);\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"exit\" && tutorial && creatingpack) {\r\n\t\t\t\tmainMenu();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse if (words[0] == \"stop\" && tutorial) {\r\n\t\t\t\ttutem.stop();\r\n\t\t\t}\r\n\r\n\t\t\telse if (words[0] == \"music\" && !tutorial) {\r\n\t\t\t\tfor (let i = 1; i < words.length; i++) {\r\n\t\t\t\t\tlet what = words[i].split(\"=\");\r\n\t\t\t\t\tif (what[0] == \"volume\") {\r\n\t\t\t\t\t\tlev_vol = Number(what[1]);\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"wait\") {\r\n\t\t\t\t\t\twait = Number(what[1]);\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"jingle\") {\r\n\t\t\t\t\t\tjng = what[1];\r\n\t\t\t\t\t\tif (!fs.existsSync(path + jng + \".ogg\")) {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"music jingle not found.\");\r\n\t\t\t\t\t\t}//volume\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (what[0] == \"perfect\") {\r\n\t\t\t\t\t\tperfectjng = what[1];\r\n\t\t\t\t\t\tif (!fs.existsSync(path + perfectjng + \".ogg\")) {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"perfect sound not found.\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"fail\") {\r\n\t\t\t\t\t\tfailjng = what[1];\r\n\t\t\t\t\t\tif (!fs.existsSync(path + failjng + \".ogg\")) {\r\n\t\t\t\t\t\t\tawait new ScrollingText(\"fail music not found.\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}//volume\r\n\t\t\t\t\telse if (what[0] == \"name\") {\r\n\t\t\t\t\t\tln = what[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}//music for\r\n\t\t\t}//music word\r\n\t\t\telse if (words[0] == \"!\" || words[0] == \"@\" && !tutorial) {\r\n\t\t\t\tlet macros = words[1];\r\n\t\t\t\tlet macrot = words[2];\r\n\t\t\t\tlet macre = \"\";\r\n\t\t\t\tlet typecheck = words[2].split(\",\");\r\n\t\t\t\tif (words[0] == \"@\") {\r\n\t\t\t\t\tif (words.length != 3) {\r\n\t\t\t\t\t\tawait new ScrollingText(\"bad reference sintax: Line \" + curline + \": A macro reference command must have 3 elements: @ macroname time\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!macrod.hasOwnProperty(words[1])) {\r\n\t\t\t\t\t\tawait new ScrollingText(\"Bad reference: Line \" + curline + \": You are referring to macro \" + words[1] + \", which is unknown.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tmacros = macrod[words[1]];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (words.length <= 2) {\r\n\t\t\t\t\t\tawait new ScrollingText(\"bad macro, You have malformed macro sintax on line \" + curline);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (words.length > 3) {\r\n\t\t\t\t\t\tlet built = words[1];\r\n\t\t\t\t\t\tmacrod[words[3]] = built;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet macro = macros.split(\",\");\r\n\t\t\t\tlet mrte;\r\n\t\t\t\tlet mrt = Number(macrot);\r\n\t\t\t\tif (mrt == 0) {\r\n\t\t\t\t\tawait new ScrollingText(\"Macro time on line \" + curline + \" was either not specified || not a proper number.\");\r\n\t\t\t\t}\r\n\t\t\t\tlet prs;\r\n\t\t\t\tlet timen, etimen;\r\n\t\t\t\tfor (let i = 0; i < macro.length; i++) {\r\n\t\t\t\t\tif (presets.hasOwnProperty(macro[i])) {\r\n\t\t\t\t\t\tprs = presets[macro[i]];\r\n\t\t\t\t\t\tvar diff, added, ftime, fend, eadded, ediff;\r\n\t\t\t\t\t\tfend = 0;\r\n\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\ttimen = 0, etimen = 0;\r\n\t\t\t\t\t\t\t//get ftime\r\n\t\t\t\t\t\t\tlet w = prs.split(\" \");\r\n\t\t\t\t\t\t\tfor (let i = 0; i < w.length; i++) {\r\n\t\t\t\t\t\t\t\tif (w[i].search(\"time=\") != -1) {\r\n\t\t\t\t\t\t\t\t\ttimen = i;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (w[i].search(\"end=\") != -1) {\r\n\t\t\t\t\t\t\t\t\tetimen = i;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet p = w[timen].split(\"=\");\r\n\t\t\t\t\t\t\tftime = Number(p[1]);\r\n\t\t\t\t\t\t\tif (etimen != 0) {\r\n\t\t\t\t\t\t\t\tlet p = w[etimen].split(\"=\");\r\n\t\t\t\t\t\t\t\tfend = Number(p[1]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet result = prs.search(\"ach=\");\r\n\t\t\t\t\t\t\tif (result != -1) {\r\n\t\t\t\t\t\t\t\tachie = prs.substr(result + 4);\r\n\t\t\t\t\t\t\t\tach = achie;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tach = \"\"; achie = \"\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (ach != \"\") {\r\n\t\t\t\t\t\t\t\tprs = prs.substr(1, result);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tprs = prs + \" time=\" + mrt;\r\n\t\t\t\t\t\t\tif (fend != 0) {\r\n\t\t\t\t\t\t\t\tprs = prs + \" time=\" + mrt + \" end=\" + fend;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (ach != \"\") {\r\n\t\t\t\t\t\t\t\tprs = prs + \"ach=\" + ach;\r\n\t\t\t\t\t\t\t\ttotala++;\r\n\t\t\t\t\t\t\t\tif (data.achievements.hasOwnProperty(ach)) {\r\n\t\t\t\t\t\t\t\t\tunlockeda++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmacrostuff += prs + \"\\r\\n\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tlet time = 0, timen, etime = 0, etimen;\r\n\t\t\t\t\t\t\tlet w = prs.split(\" \");\r\n\t\t\t\t\t\t\tfor (let i = 0; i < w.length; i++) {\r\n\t\t\t\t\t\t\t\tif (w[i].search(\"time=\") != -1) {\r\n\t\t\t\t\t\t\t\t\ttimen = i;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (w[i].search(\"end=\") != -1) {\r\n\t\t\t\t\t\t\t\t\tetimen = i;\r\n\t\t\t\t\t\t\t\t\tlet k = w[i].split(\"=\");\r\n\t\t\t\t\t\t\t\t\tfend = Number(k[1]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet p = w[timen].split(\"=\");\r\n\t\t\t\t\t\t\tif (etimen == 0) fend = 0;\r\n\t\t\t\t\t\t\ttime = Number(p[1]);\r\n\t\t\t\t\t\t\tif (fend != 0) {\r\n\t\t\t\t\t\t\t\tlet p = w[etimen].split(\"=\");\r\n\t\t\t\t\t\t\t\tetime = Number(p[1]);\r\n\t\t\t\t\t\t\t\tif (etime == 0) {\r\n\t\t\t\t\t\t\t\t\tawait new ScrollingText(\"There is a bug with the tap hold macro programming code, let me know the contents of line \" + curline + \" && I will try to fix.\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (time == 0) {\r\n\t\t\t\t\t\t\t\tawait new ScrollingText(\"There is a bug with the macro programming code, let me know the contents of line \" + curline + \" && I will try to fix.\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tadded = Number(time - ftime);\r\n\t\t\t\t\t\t\tdiff = mrt - added;\r\n\r\n\t\t\t\t\t\t\tif (fend != 0) {\r\n\t\t\t\t\t\t\t\teadded = etime - ftime;\r\n\t\t\t\t\t\t\t\tediff = fend - eadded;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet result = prs.search(\"ach=\");\r\n\t\t\t\t\t\t\tif (result != -1) {\r\n\t\t\t\t\t\t\t\tachie = prs.substr(result + 4);\r\n\t\t\t\t\t\t\t\tach = achie;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tach = \"\"; achie = \"\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (ach != \"\") {\r\n\t\t\t\t\t\t\t\tprs = prs.substr(1, result);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tprs = prs + \" time=\" + (mrt + added);\r\n\t\t\t\t\t\t\tif (fend != 0) {\r\n\t\t\t\t\t\t\t\tprs = prs + \" end=\" + (mrt + eadded);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (ach != \"\") {\r\n\t\t\t\t\t\t\t\tprs = prs + \"ach=\" + ach;\r\n\t\t\t\t\t\t\t\ttotala++;\r\n\t\t\t\t\t\t\t\tif (data.achievements.hasOwnProperty(ach)) {\r\n\t\t\t\t\t\t\t\t\tunlockeda++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmacrostuff += prs + \"\\r\\n\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tawait new ScrollingText(\"macro error: Non existing macro preset found \" + macro[i] + \" on line \" + curline);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (lines[i][0] != \"/\" && i != 0) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}//each line loop\r\n\t\tif (tutorial) {\r\n\t\t\ttutorial = false;\r\n\t\t\ttute.play();\r\n\t\t\tif (typeof tutem !== \"undefined\") tutem.stop();\r\n\t\t\tstartlev(olv);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthe_string = macrostuff;\r\n\t\t//await new ScrollingText(the_string);\r\n\t}//loop twice\r\n\tso.setQueueCallback(() => {\r\n\t\tloadlev(lname, lev_vol);\r\n\t});\r\n\tso.loadQueue();\r\n}//function\r\nfunction get_ach(str) {\r\n\tif (!data.achievements.hasOwnProperty(str)) {\r\n\t\tdata.achievements[str] = str;\r\n\t\tachs = so.create(\"newach\");\r\n\t\tachs.stop();\r\n\t\tachs.play();\r\n\t\tsave();\r\n\t}\r\n}\r\nasync function loadlev(name, volume) {\r\n\tlet input = new KeyboardInput();\r\n\tinput.init();\r\n\tperfect = true;\r\n\tgood = 0; bad = 0;\r\n\tif (musiconly) {\r\n\t\tunlockeda = 0;\r\n\t\ttotala = 0;\r\n\t\tactions = [];\r\n\t\tsounds = [];\r\n\t}\r\n\ttotalactions = actions.length;\r\n\tif (unlockeda < totala && com == \"\") {\r\n\t\tawait new ScrollingText(strings.get(\"thisLevelAchievements\", [unlockeda, totala]));\r\n\t}\r\n\tlasts = 100000000;\r\n\tlasta = 100000000;\r\n\tnopack();\r\n\tlet finished = false;\r\n\tyespack();\r\n\tspeech.speak(ln);\r\n\tmusic = so.create(ln);\r\n\tmusic.sound.once(\"load\", async () => {\r\n\t\tlet jing = fs.existsSync(path + jng + \".ogg\");\r\n\t\tif (!jing && creatingpack) {\r\n\t\t\tawait new ScrollingText(\"jingle error: level start jingle not found. If it shouldn't be named \" + jng + \".ogg, make sure you define it correctly in the script by using the music jingle=... command.\");\r\n\t\t}\r\n\t\tif (com == \"\") {\r\n\t\t\tlet snd = so.create(jng);\r\n\t\t\tawait snd.playSync();\r\n\t\t}\r\n\t\tmusic.bgtVolume = volume;\r\n\t\tif (musiconly) music.bgtVolume = 1;\r\n\t\tif (seek != 0) music.seek(seek);\r\n\t\tmusic.play();\r\n\t\tif (perfectrun) debugmode = true;\r\n\t\tlet looping = true;\r\n\t\tawait new Promise(async (resolve, reject) => {\r\n\t\t\twhile (looping) {\r\n\t\t\t\tawait utils.sleep(3);\r\n\t\t\t\tif (!music.playing) {\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t//do stuff\r\n\t\t\t\tif (lasta == 100000000 && actions.length != 0) {\r\n\t\t\t\t\tfor (let i = 0; i < actions.length; i++) {\r\n\t\t\t\t\t\tif (actions[i].duration <= lasta) {\r\n\t\t\t\t\t\t\tif (actions[i].duration < seek) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlasta = actions[i].duration;\r\n\t\t\t\t\t\t\tlastan = i;\r\n\t\t\t\t\t\t\tlastak = actions[i].key;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//actions method\r\n\t\t\t\tif (cooler.elapsed >= cooltime) {\r\n\t\t\t\t\tcooldown = false;\r\n\t\t\t\t\tcooler.pause();\r\n\t\t\t\t}\r\n\t\t\t\tkeys = input.keysPressed();\r\n\t\t\t\tif (keys.length == 1) {\r\n\t\t\t\t\tif (keys[0] == KeyEvent.DOM_VK_END && creatingpack) {\r\n\t\t\t\t\t\tspeech.speak(music.position);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (keys[0] == KeyEvent.DOM_VK_Q) {\r\n\t\t\t\t\t\tstartgame(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (lasta != 100000000 && input.keysDown().length == 1) {\r\n\t\t\t\t\t\tif (!cooldown) {\r\n\t\t\t\t\t\t\tif (keys[0] == lastak && lasta != 100000000) {\r\n\t\t\t\t\t\t\t\tlet distance = music.position - lasta;\r\n\t\t\t\t\t\t\t\tif (distance <= -timewindow * 2.5) {\r\n\t\t\t\t\t\t\t\t\tactions[lastan].badkey();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if (distance >= -timewindow * 2.5 + 1 && distance <= -timewindow / 2 - 10) {\r\n\t\t\t\t\t\t\t\t\tactions[lastan].early();\r\n\t\t\t\t\t\t\t\t\tactions.splice(lastan, 1);\r\n\t\t\t\t\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\t\t\t\t\tlastan = -1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if (distance >= timewindow / 2 && distance < timewindow / 2 + 10) {\r\n\t\t\t\t\t\t\t\t\tactions[lastan].late();\r\n\t\t\t\t\t\t\t\t\tactions.splice(lastan, 1);\r\n\t\t\t\t\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tactions[lastan].play();\r\n\t\t\t\t\t\t\t\t\tif (actions[lastan].type == 1) {\r\n\t\t\t\t\t\t\t\t\t\tactions.splice(lastan, 1);\r\n\t\t\t\t\t\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tif (actions.length > 0 && lasta != 100000000) {\r\n\t\t\t\t\t\t\t\t\tlet distance = music.position - lasta;\r\n\t\t\t\t\t\t\t\t\tactions[lastan].badkey();\r\n\t\t\t\t\t\t\t\t\tif (distance > -timewindow * 3 && distance <= timewindow * 3) {\r\n\t\t\t\t\t\t\t\t\t\t//do nothing\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (lasta != 100000000 && input.isJustReleased(actions[lastan].key) && actions[lastan].type == 2 && actions[lastan].held) {\r\n\t\t\t\t\tif (!debugmode) {\r\n\t\t\t\t\t\tactions[lastan].stop();\r\n\t\t\t\t\t\tlet distance = music.position - actions[lastan].end;\r\n\t\t\t\t\t\tif (distance <= -timewindow) {\r\n\t\t\t\t\t\t\tactions[lastan].efail();\r\n\t\t\t\t\t\t\tactions.splice(lastan, 1);\r\n\t\t\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (distance >= -timewindow + 1 && distance <= -timewindow / 2) {\r\n\t\t\t\t\t\t\tactions[lastan].efail();\r\n\t\t\t\t\t\t\tactions.splice(lastan, 1);\r\n\t\t\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (distance >= timewindow && distance < timewindow / 2 + 10) {\r\n\t\t\t\t\t\t\tactions[lastan].efail();\r\n\t\t\t\t\t\t\tactions.splice(lastan, 1);\r\n\t\t\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tactions[lastan].release();\r\n\t\t\t\t\t\t\tactions.splice(lastan, 1);\r\n\t\t\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (lasta != 100000000 && music.position >= actions[lastan].end && debugmode && actions[lastan].type == 2) {\r\n\t\t\t\t\tactions[lastan].release();\r\n\t\t\t\t\tactions.splice(lastan, 1);\r\n\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (lasta != 100000000) {\r\n\t\t\t\t\tif (music.position >= lasta && debugmode) {\r\n\t\t\t\t\t\tif (!actions[lastan].played) actions[lastan].play();\r\n\t\t\t\t\t\tif (actions[lastan].type == 1) {\r\n\t\t\t\t\t\t\tactions.splice(lastan, 1);\r\n\t\t\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((music.position > lasta + timewindow / 2 + 10 && actions[lastan].type == 1) || (music.position > actions[lastan].end + timewindow / 2 + 10 && (actions[lastan].type == 2 && actions[lastan].held) || (actions[lastan].type == 2 && !actions[lastan].held && music.position >= lasta + timewindow / 2 + 10))) {\r\n\t\t\t\t\t\tif (!debugmode) {\r\n\t\t\t\t\t\t\tif (actions[lastan].type == 1) {\r\n\t\t\t\t\t\t\t\tactions[lastan].fail();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (actions[lastan].type == 2) {\r\n\t\t\t\t\t\t\t\tif (!actions[lastan].released) {\r\n\t\t\t\t\t\t\t\t\tif (input.isDown(actions[lastan].key)) actions[lastan].efail();\r\n\t\t\t\t\t\t\t\t\tif (!input.isDown(actions[lastan].key)) actions[lastan].fail();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (actions[lastan].type == 2) actions[lastan].stop();\r\n\t\t\t\t\t\t\tactions.splice(lastan, 1);\r\n\t\t\t\t\t\t\tlasta = 100000000;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//sounds player\r\n\t\t\t\tif (lasts == 100000000 && sounds.length != 0) {\r\n\t\t\t\t\tfor (let i = 0; i < sounds.length; i++) {\r\n\t\t\t\t\t\tif (sounds[i].duration <= lasts) {\r\n\t\t\t\t\t\t\tif (sounds[i].duration < seek) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlasts = sounds[i].duration;\r\n\t\t\t\t\t\t\tlastsn = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (music.position >= lasts && lasts != -1) {\r\n\t\t\t\t\tsounds[lastsn].play();\r\n\t\t\t\t\tsounds.splice(lastsn, 1);\r\n\t\t\t\t\tlasts = 100000000;\r\n\t\t\t\t}\r\n\t\t\t}//loop\r\n\t\t});\r\n\t\tawait utils.sleep(wait);\r\n\t\t//calculate here\r\n\t\tif (!perfectrun && !debugmode) {\r\n\t\t\tlet oldwell = 0;\r\n\t\t\tlet total = good + bad;\r\n\t\t\tif (total != 0 || good != 0) {\r\n\t\t\t\tlet wellc = 100 / total * good;\r\n\t\t\t\tlet well = Math.ceil(wellc);\r\n\t\t\t\tif (well >= super_n && !perfect) {\r\n\t\t\t\t\toldwell = well;\r\n\t\t\t\t\twell = super_n - 1;\r\n\t\t\t\t}\r\n\t\t\t\tnopack();\r\n\t\t\t\tstrings.speak(\"calculating\");\r\n\t\t\t\tpool.playStatic(\"calc1\", false);\r\n\t\t\t\tcom = \"\";\r\n\t\t\t\tawait utils.sleep(utils.randomInt(150, 300));\r\n\t\t\t\tpool.playStatic(\"calc1\", false);\r\n\t\t\t\tawait utils.sleep(utils.randomInt(350, 600));\r\n\t\t\t\tpool.playStatic(\"calc1\", false);\r\n\t\t\t\tawait utils.sleep(utils.randomInt(650, 800));\r\n\t\t\t\tpool.playStatic(\"calc1\", false);\r\n\t\t\t\tawait utils.sleep(utils.randomInt(450, 600));\r\n\t\t\t\tif (good > bad) {\r\n\t\t\t\t\tpool.playStatic(\"calc3\", false);\r\n\t\t\t\t\tawait utils.sleep(utils.randomInt(1500, 3000));\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tpool.playStatic(\"calc2\", false);\r\n\t\t\t\t\tawait utils.sleep(utils.randomInt(1000, 2400));\r\n\t\t\t\t}\r\n\t\t\t\tyespack();\r\n\t\t\t\tlet levjing;\r\n\t\t\t\tlet message;\r\n\t\t\t\tlet val;\r\n\t\t\t\tif (well == 100) {\r\n\t\t\t\t\tval = 4;\r\n\t\t\t\t\tlevjing = so.create(perfectjng);\r\n\t\t\t\t\tif (lang == 1) message = \"That was perfect! Nice!\";\r\n\t\t\t\t\tif (lang == 2) message = \"Genial! Lo has hecho perfecto!\";\r\n\t\t\t\t}\r\n\t\t\t\telse if (well <= 99 && well >= super_n) {\r\n\t\t\t\t\tval = 3;\r\n\t\t\t\t\tlevjing = so.create(superv);\r\n\t\t\t\t\tif (lang == 1) message = \"Pretty good!\" + well + \" percent!\";\r\n\t\t\t\t\tif (lang == 2) message = \"Muy bien!\" + well + \" por ciento!\";\r\n\t\t\t\t}\r\n\t\t\t\telse if (well <= super_n - 1 && well >= ok_n) {\r\n\t\t\t\t\tval = 2;\r\n\t\t\t\t\tlevjing = so.create(okjng);\r\n\t\t\t\t\tif (lang == 1) message = \"Well... ok. \" + well + \" percent.\";\r\n\t\t\t\t\tif (lang == 2) message = \"Bueno... Bien. \" + well + \" por ciento.\";\r\n\t\t\t\t}\r\n\t\t\t\telse if (well < ok_n) {\r\n\t\t\t\t\tval = 1;\r\n\t\t\t\t\tlevjing = so.create(failjng);\r\n\t\t\t\t\tif (lang == 1) message = \"That was terrible! \" + well + \" percent.\";\r\n\t\t\t\t\tif (lang == 2) message = \"Pat�tico! Has jugado muy mal! \" + well + \" por ciento.\";\r\n\t\t\t\t}\r\n\t\t\t\tif (oldwell != 0) {\r\n\t\t\t\t\tif (lang == 2) {\r\n\t\t\t\t\t\tmessage += \". Vaya, hiciste mal alguna parte importante... Eso no te ha ayudado. es una l�stima, porque ten�as \" + well + \" por ciento.\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (lang == 1) {\r\n\t\t\t\t\t\tmessage += \". Pitty, you failed something important in this level... This will not help you. A pitty because you had \" + oldwell + \" percent.\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tawait new ScrollingText(message);\r\n\t\t\t\tlevjing.play();\r\n\t\t\t\tokval = val;\r\n\t\t\t\tif (get_level(lname) < val) {\r\n\t\t\t\t\tif (!creatingpack) set_level(lname, val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (get_level(lname) != 0) {\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tspeech.speak(\"I cannot calculate your result ...\");\r\n\t\t\t\tawait utils.sleep(1000);\r\n\t\t\t}\r\n\t\t\tif (okval > 1 && last && !creatingpack) {\r\n\t\t\t\tlet win = so.create(\"win_pack\", true);\r\n\t\t\t\tawait win.playSync();\r\n\t\t\t\tif (lang == 1) await get_ach(\"You beat the \" + pack + \" pack!\");\r\n\t\t\t\tif (lang == 2) await get_ach(\"has completado el pack \" + pack + \"!\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tstartgame(1);\r\n\t});\r\n\treturn;\r\n}\r\nexport async function changeRate() {\r\n\tlet rate = speech.rate;\r\n\tlet inp = new KeyboardInput();\r\n\tinp.init();\r\n\tstrings.speak(\"rating\");\r\n\twhile (!inp.isJustPressed(KeyEvent.DOM_VK_RETURN)) {\r\n\t\tawait utils.sleep(5);\r\n\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_RIGHT)) {\r\n\t\t\trate = rate + 0.25;\r\n\t\t\tspeech.rate = rate;\r\n\t\t\tstrings.speak(\"newRate\");\r\n\t\t}\r\n\t\tif (inp.isJustPressed(KeyEvent.DOM_VK_LEFT)) {\r\n\t\t\trate = rate - 0.25;\r\n\t\t\tspeech.rate = rate;\r\n\t\t\tstrings.speak(\"newRate\");\r\n\t\t}\r\n\t}\r\n\tdata.rate = speech.rate;\r\n\tsave();\r\n\tst.setState(2);\r\n}\r\nmodule.exports.cooldown = cooldown;\r\nmodule.exports.cooler = cooler;\r\nmodule.exports.perfect = perfect;\r\nmodule.exports.aliases = aliases;"]}